<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Spring源码分析 - cuzz&#039;s blog</title><meta description="博客记录"><meta property="og:type" content="blog"><meta property="og:title" content="Spring源码分析"><meta property="og:url" content="https://blog.cuzz.site/2022/03/25/spring-source-code-analysis-1/"><meta property="og:site_name" content="cuzz&#039;s blog"><meta property="og:description" content="博客记录"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://picsum.photos/521/318"><meta property="article:published_time" content="2022-03-24T16:00:46.000Z"><meta property="article:author" content="cuzz"><meta property="article:tag" content="Spring"><meta property="article:tag" content="源码"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://picsum.photos/521/318"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.cuzz.site/2022/03/25/spring-source-code-analysis-1/"},"headline":"cuzz's blog","image":[],"datePublished":"2022-03-24T16:00:46.000Z","author":{"@type":"Person","name":"John Doe"},"description":"Spring 是我们工作中最常用的框架，Spring使我们开发变得简单，工作几年只停留在使用 Spring 层面上，很多特性以及实现原理还知道，这次通过学习 Spring 源码加深自己对它的理解，同样学习优秀的框架可以学到很多设计理念。"}</script><link rel="canonical" href="https://blog.cuzz.site/2022/03/25/spring-source-code-analysis-1/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.13.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.0.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/likes">Likes</a><a class="navbar-item" href="/images">Images</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cuzz1"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://picsum.photos/521/318" alt="Spring源码分析"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-03-24T16:00:46.000Z" title="2022-03-24T16:00:46.000Z">2022-03-25</time></span><span class="level-item"><a class="link-muted" href="/categories/Spring/">Spring</a></span><span class="level-item">19 minutes read (About 2878 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Spring源码分析</h1><div class="content"><p>Spring 是我们工作中最常用的框架，Spring使我们开发变得简单，工作几年只停留在使用 Spring 层面上，很多特性以及实现原理还知道，这次通过学习 Spring 源码加深自己对它的理解，同样学习优秀的框架可以学到很多设计理念。</p>
<a id="more"></a>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Spring 最重要的是 IoC(Inversion of Control) 容器，IOC 容器就是具有依赖注入功能的容器，IoC 容器负责实例化、定位、配置应用程序中的对象及建立这些对象间的依赖。应用程序无需直接在代码中 <code>new</code> 相关的对象，应用程序由 IoC 容器进行组装。</p>
<p>下面这张图体现了 IoC 容器是如何装配一个 Bean 的，刚开始我们的解析配置（xml配置、注解配置）得到 BeanDefinition（Bean的定义信息），接着通过反射实例化，然后进行初始化得到一个完整的Bean，最后使用完成进行销毁。</p>
<img class="kroki" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIxMTM3cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDo2MjFweDtoZWlnaHQ6MTEzN3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDYyMSAxMTM3IiB3aWR0aD0iNjIxcHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48IS0tTUQ1PVs3ZmMxMzhjNDU5NGM1MGU1MjQyNDQxNGQ3NDc2Y2I1Zl0KY2x1c3RlciBDb25maWctLT48ZyBpZD0iY2x1c3Rlcl9Db25maWciPjxwYXRoIGQ9Ik03OS41LDYgTDE3NC41LDYgQTMuNzUsMy43NSAwIDAgMSAxNzcsOC41IEwxODQsMjguNzk5OSBMMzAzLjUsMjguNzk5OSBBMi41LDIuNSAwIDAgMSAzMDYsMzEuMjk5OSBMMzA2LDEwNy41IEEyLjUsMi41IDAgMCAxIDMwMy41LDExMCBMNzkuNSwxMTAgQTIuNSwyLjUgMCAwIDEgNzcsMTA3LjUgTDc3LDguNSBBMi41LDIuNSAwIDAgMSA3OS41LDYgIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTtmaWxsOm5vbmU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7ZmlsbDpub25lOyIgeDE9Ijc3IiB4Mj0iMTg0IiB5MT0iMjguNzk5OSIgeTI9IjI4Ljc5OTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQiIHg9IjgxIiB5PSIyMS45OTk5Ij5EZWZpbmUgQ29uZmlnPC90ZXh0PjwvZz48IS0tTUQ1PVszMDY5OTEzZTliOWQzM2JmYTYwZjE0OWRhY2M2MjlkMF0KY2x1c3RlciBJT0MtLT48ZyBpZD0iY2x1c3Rlcl9JT0MiPjxwYXRoIGQ9Ik04LjUsMTY3IEwxMDUuNSwxNjcgQTMuNzUsMy43NSAwIDAgMSAxMDgsMTY5LjUgTDExNSwxODkuNzk5OSBMNjExLjUsMTg5Ljc5OTkgQTIuNSwyLjUgMCAwIDEgNjE0LDE5Mi4yOTk5IEw2MTQsMTEyOCBBMi41LDIuNSAwIDAgMSA2MTEuNSwxMTMwLjUgTDguNSwxMTMwLjUgQTIuNSwyLjUgMCAwIDEgNiwxMTI4IEw2LDE2OS41IEEyLjUsMi41IDAgMCAxIDguNSwxNjcgIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTtmaWxsOm5vbmU7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7ZmlsbDpub25lOyIgeDE9IjYiIHgyPSIxMTUiIHkxPSIxODkuNzk5OSIgeTI9IjE4OS43OTk5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk2IiB4PSIxMCIgeT0iMTgyLjk5OTkiPklPQyBDb250YWluZXI8L3RleHQ+PC9nPjwhLS1NRDU9W2ZjNzI5YWU0MDUxMWI2MzhlYzFlZTZmZWJmMDQxZGQ1XQpjbHVzdGVyIGItLT48ZyBpZD0iY2x1c3Rlcl9iIj48cmVjdCBoZWlnaHQ9IjMyMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7ZmlsbDpub25lOyIgd2lkdGg9IjI1MiIgeD0iMzMwIiB5PSIyMTgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTg2IiB4PSIzNjMiIHk9IjIzMy45OTk5Ij5iZWFuRmFjdG9yeVBvc3RQcm9jZXNzb3I8L3RleHQ+PC9nPjwhLS1NRDU9WzYyZTk4MWFlZGVhZDVkMjk2YTBlZDA5MGNhYzZjMjIwXQpjbHVzdGVyIGluaXQtLT48ZyBpZD0iY2x1c3Rlcl9pbml0Ij48cmVjdCBoZWlnaHQ9IjY1NC41IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDtmaWxsOm5vbmU7IiB3aWR0aD0iMjY4IiB4PSIzMCIgeT0iNDUyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1NCIgeD0iODciIHk9IjQ2Ny45OTk5Ij5pbml0aWFsaXphdGlvbu+8iOWIneWni+WMlu+8iTwvdGV4dD48L2c+PCEtLU1ENT1bMzhhNDUyMDNkMTdlYTNiYTFiZDk1YzczNWRjNDY5M2ZdCmNsdXN0ZXIgZGVzdC0tPjxnIGlkPSJjbHVzdGVyX2Rlc3QiPjxyZWN0IGhlaWdodD0iMTk0LjUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wO2ZpbGw6bm9uZTsiIHdpZHRoPSIyNjgiIHg9IjMyMiIgeT0iNzk1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOSIgeD0iNDAxLjUiIHk9IjgxMC45OTk5Ij5EZXN0b3J577yI6ZSA5q+B77yJPC90ZXh0PjwvZz48IS0tTUQ1PVs2OWZhYTdlYzIwMmRmYWJlMTVhYTE1NjFmNTMxMjZiZl0KZW50aXR5IHhtbC0tPjxnIGlkPSJlbGVtX3htbCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi43OTk5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0MSIgeD0iMjQwLjUiIHk9IjQ5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjEiIHg9IjI1MC41IiB5PSI3Mi45OTk5Ij54bWw8L3RleHQ+PC9nPjwhLS1NRDU9WzhmMjEzZDk3YzBhNWI4ZjNjMThlMDZhOTEyNThjZGQ3XQplbnRpdHkgYW5ub3RhdGlvbi0tPjxnIGlkPSJlbGVtX2Fubm90YXRpb24iPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iODUiIHg9IjEyMC41IiB5PSI0OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY1IiB4PSIxMzAuNSIgeT0iNzIuOTk5OSI+YW5ub3RhdGlvbjwvdGV4dD48L2c+PCEtLU1ENT1bNGE5YmU3MzRlZmI0YzZiODljYjJmMTk3YTVlMzM5YzldCmVudGl0eSBiZC0tPjxnIGlkPSJlbGVtX2JkIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2Ljc5OTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMSIgeD0iMjQuNSIgeT0iMjU0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAxIiB4PSIzNC41IiB5PSIyNzcuOTk5OSI+QmVhbkRlZmluaXRhdGlvbjwvdGV4dD48L2c+PCEtLU1ENT1bNTU0OTJlYjFjNGI2MmNjOWU4OTJlMWZhZmRhZWI0NGNdCmVudGl0eSBiMS0tPjxnIGlkPSJlbGVtX2IxIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIyLjc5OTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4NSIgeD0iMzczLjUiIHk9IjI2MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2NSIgeD0iMzgzLjUiIHk9IjI3Ny45OTk5Ij5iZWFuRmFjdG9yeVBvc3RQcm9jZXNzb3I8L3RleHQ+PC9nPjwhLS1NRDU9W2JiMDRhMjBmOGZmYzNmYTQwZDkwODZiZGViODc1OWRjXQplbnRpdHkgYjItLT48ZyBpZD0iZWxlbV9iMiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyMi43OTk5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxODUiIHg9IjM3My41IiB5PSIzNzUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjUiIHg9IjM4My41IiB5PSIzOTEuOTk5OSI+YmVhbkZhY3RvcnlQb3N0UHJvY2Vzc29yPC90ZXh0PjwvZz48IS0tTUQ1PVtlOWQ5NWYyMGZjOTljZTJmYjhiOTc3ZGYzNzJlNjdkZV0KZW50aXR5IGIzLS0+PGcgaWQ9ImVsZW1fYjMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMjIuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTg1IiB4PSIzNzMuNSIgeT0iNDk0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY1IiB4PSIzODMuNSIgeT0iNTEwLjk5OTkiPmJlYW5GYWN0b3J5UG9zdFByb2Nlc3NvcjwvdGV4dD48L2c+PCEtLU1ENT1bZjU3NTQ3NWJiOWIyYTIyN2RkYzNiOTZhOGQzZmIzNGRdCmVudGl0eSBpbnN0LS0+PGcgaWQ9ImVsZW1faW5zdCI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi43OTk5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNjUiIHg9IjM1LjUiIHk9IjM2OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NSIgeD0iNDUuNSIgeT0iMzkxLjk5OTkiPmluc3RhbnRpYXRpb27vvIjlrp7kvovljJbvvIk8L3RleHQ+PC9nPjwhLS1NRDU9WzIxZTlmYWFhZTE5MjdiMTE2NjAxZDMxMGExOWFjM2VhXQplbnRpdHkgaTEtLT48ZyBpZD0iZWxlbV9pMSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi43OTk5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzEiIHg9IjUzLjUiIHk9IjQ4NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MSIgeD0iNjMuNSIgeT0iNTEwLjk5OTkiPnBvcHVsYXRlQmVhbijloavlhYXlsZ7mgKcpPC90ZXh0PjwvZz48IS0tTUQ1PVtjNTY5YTA0ZDExNzUwMWJkZWE3ZWEzZWIwMDU3MGNiZl0KZW50aXR5IGkyLS0+PGcgaWQ9ImVsZW1faTIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjAzIiB4PSI1My41IiB5PSI1OTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODMiIHg9IjYzLjUiIHk9IjYxOS45OTk5Ij7miafooYzlkITnp41Bd2FyZeaOpeWPo+eahHNldOaWueazlTwvdGV4dD48L2c+PCEtLU1ENT1bOGUxOWViZDI0MTkzM2YwOGIyYzZlMTk5NjUxYTcwMjZdCmVudGl0eSBpMy0tPjxnIGlkPSJlbGVtX2kzIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUzLjU5OTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIzNSIgeD0iNDYuNSIgeT0iNjk0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYyIiB4PSI1Ni41IiB5PSI3MTcuOTk5OSI+5omn6KGMQmVhblBvc3RQcm9jZXNzb3LnmoQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjE1IiB4PSI1Ni41IiB5PSI3MzQuNzk5OSI+cG9zdFByb2Nlc3NCZWZvcmVJbml0aWFsaXphdGlvbuaWueazlTwvdGV4dD48L2c+PCEtLU1ENT1bMmY3YzUyYjAxYWJkMzg4YjE5ZTg1ODg4ZDcxN2Q2YjddCmVudGl0eSBpNC0tPjxnIGlkPSJlbGVtX2k0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjUzLjU5OTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1OCIgeD0iOTQiIHk9IjgyMS41Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM2IiB4PSIxMDQiIHk9Ijg0NS40OTk5Ij7miafooYxJbml0aWFsaXppbmdCZWFu55qEPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzOCIgeD0iMTA0IiB5PSI4NjIuMjk5OSI+YWZ0ZXJQcm9wZXJ0aWVzU2V05pa55rOVPC90ZXh0PjwvZz48IS0tTUQ1PVtmOWJhN2VhNDU3NjI3ZTAxNGFiMTBiYWJjZWFiMjQ2Zl0KZW50aXR5IGk1LS0+PGcgaWQ9ImVsZW1faTUiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYxIiB4PSI5Ny41IiB5PSI5MzYuNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0MSIgeD0iMTA3LjUiIHk9Ijk2MC40OTk5Ij7miafooYzoh6rlrprkuYkgaW5pdCBtZXRob2Q8L3RleHQ+PC9nPjwhLS1NRDU9WzQwMWFkMzVkOTYzMTdhMzIwZGUxNWY2Mzc3MmZhZjQwXQplbnRpdHkgaTYtLT48ZyBpZD0iZWxlbV9pNiI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI1My41OTk5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxOTciIHg9IjgzLjUiIHk9IjEwMzYuNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2MiIgeD0iOTMuNSIgeT0iMTA2MC40OTk5Ij7miafooYxCZWFuUG9zdFByb2Nlc3NvcueahDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzciIHg9IjkzLjUiIHk9IjEwNzcuMjk5OSI+cG9zdFByb2Nlc3NBZnRlckluaXRpYWxpemF0aW9uPC90ZXh0PjwvZz48IS0tTUQ1PVtlYTcxNWIxYjA0Mjg4MzM5ZDkyOTAzYTFhODg3MGM2M10KZW50aXR5IGJlYW5TdWNjZXNzLS0+PGcgaWQ9ImVsZW1fYmVhblN1Y2Nlc3MiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUwIiB4PSIzNDciIHk9IjEwNDUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMzAiIHg9IjM1NyIgeT0iMTA2OC45OTk5Ij7lrozmlbTnmoRCZWFu5Yib5bu65oiQ5YqfPC90ZXh0PjwvZz48IS0tTUQ1PVtkYzNkY2Y2OTY1OWM5NDk4M2VkNzkzMWQzZTZlZGYzMl0KZW50aXR5IGQxLS0+PGcgaWQ9ImVsZW1fZDEiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMjM1IiB4PSIzMzguNSIgeT0iOTM2LjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTUiIHg9IjM0OC41IiB5PSI5NjAuNDk5OSI+5omn6KGMRGlzcG9zYWJsZUJlYW7nmoRkZXN0b3J55pa55rOVPC90ZXh0PjwvZz48IS0tTUQ1PVs1YzZkMzMyYTkzOWMzYmI0OGM5NTljOGFmNGMyMTRkN10KZW50aXR5IGQyLS0+PGcgaWQ9ImVsZW1fZDIiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuNzk5OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTg0IiB4PSIzNjQiIHk9IjgzMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2NCIgeD0iMzc0IiB5PSI4NTMuOTk5OSI+5omn6KGM6Ieq5a6a5LmJZGVzdG9yeSBtZXRob2Q8L3RleHQ+PC9nPjwhLS1NRDU9W2RhZDVkMmUxYTJhNWNhMjkwMDFjMjIzYTY1YzNlZTVmXQpsaW5rIGIxIHRvIGIyLS0+PGcgaWQ9ImxpbmtfYjFfYjIiPjxwYXRoIGQ9Ik00NjYsMjg0LjI0IEM0NjYsMzA0LjExIDQ2NiwzNDYuNjggNDY2LDM2OS44ICIgZmlsbD0ibm9uZSIgaWQ9ImIxLXRvLWIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ2NiwzNzQuOTYsNDcwLDM2NS45Niw0NjYsMzY5Ljk2LDQ2MiwzNjUuOTYsNDY2LDM3NC45NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9W2RkN2JiMDg4Y2YxMDhjNzhlYzA5N2RmZDlmYzAwNDcyXQpsaW5rIGIyIHRvIGIzLS0+PGcgaWQ9ImxpbmtfYjJfYjMiPjxwYXRoIGQ9Ik00NjYsMzk4LjMgQzQ2Niw0MTkuMDIgNDY2LDQ2NC40NSA0NjYsNDg4LjYzICIgZmlsbD0ibm9uZSIgaWQ9ImIyLXRvLWIzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ2Niw0OTMuNzMsNDcwLDQ4NC43Myw0NjYsNDg4LjczLDQ2Miw0ODQuNzMsNDY2LDQ5My43MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9WzY1OWI2MTM2NmI2ZjZmZjA0MjBlYjAzYzQ0ZTIxOWY4XQpsaW5rIGkxIHRvIGkyLS0+PGcgaWQ9ImxpbmtfaTFfaTIiPjxwYXRoIGQ9Ik0xNDEuNjQsNTI0LjE3IEMxNDQuMzYsNTQyLjM3IDE0OC42Miw1NzAuOCAxNTEuNTksNTkwLjY5ICIgZmlsbD0ibm9uZSIgaWQ9ImkxLXRvLWkyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE1Mi4zNSw1OTUuOCwxNTQuOTcyLDU4Ni4zMDY2LDE1MS42MDksNTkwLjg1NTIsMTQ3LjA2MDQsNTg3LjQ5MjIsMTUyLjM1LDU5NS44IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48L2c+PCEtLU1ENT1bYjdjNTliMWVkYzU2MWI3NDdkZGI4MGEwMDE0YjM0YjRdCmxpbmsgaTIgdG8gaTMtLT48ZyBpZD0ibGlua19pMl9pMyI+PHBhdGggZD0iTTE1Ni41Myw2MzMuMjMgQzE1Ny44NCw2NDguNDUgMTU5Ljc2LDY3MC43NSAxNjEuMzIsNjg4LjkzICIgZmlsbD0ibm9uZSIgaWQ9ImkyLXRvLWkzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE2MS43Niw2OTMuOTQsMTY0Ljk3NDUsNjg0LjYzMDUsMTYxLjMzMTgsNjg4Ljk1ODQsMTU3LjAwMzksNjg1LjMxNTYsMTYxLjc2LDY5My45NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9WzQ1NTEyMWMzNzEyOWY2N2VhY2UxNzQ2YzM2ZjM2ZmJiXQpsaW5rIGkzIHRvIGk0LS0+PGcgaWQ9ImxpbmtfaTNfaTQiPjxwYXRoIGQ9Ik0xNjUuODYsNzQ4IEMxNjcuMjgsNzY3LjczIDE2OS4yMyw3OTQuOTMgMTcwLjczLDgxNS45MSAiIGZpbGw9Im5vbmUiIGlkPSJpMy10by1pNCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzEuMTEsODIxLjEsMTc0LjQ1NjcsODExLjgzNzIsMTcwLjc1MjcsODE2LjExMjgsMTY2LjQ3NzIsODEyLjQwODgsMTcxLjExLDgyMS4xIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48L2c+PCEtLU1ENT1bNzhiNWQ5MmViN2I5NGFmZDdiOTMwZjQ5NGVjMTYwZjVdCmxpbmsgaTQgdG8gaTUtLT48ZyBpZD0ibGlua19pNF9pNSI+PHBhdGggZD0iTTE3NC4yNSw4NzUuNiBDMTc1LjA2LDg5Mi42NSAxNzYuMTIsOTE0LjcyIDE3Ni45LDkzMS4wOSAiIGZpbGw9Im5vbmUiIGlkPSJpNC10by1pNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNzcuMTYsOTM2LjQxLDE4MC43MTg3LDkyNy4yMjY1LDE3Ni45MTc0LDkzMS40MTU5LDE3Mi43MjgxLDkyNy42MTQ3LDE3Ny4xNiw5MzYuNDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwvZz48IS0tTUQ1PVsxYTZmNzRhZjEwNGRlYzMzMzU4YWEzM2MzYTI3M2JiOF0KbGluayBpNSB0byBpNi0tPjxnIGlkPSJsaW5rX2k1X2k2Ij48cGF0aCBkPSJNMTc4LjY2LDk3My41OSBDMTc5LjI0LDk4OS4xNCAxODAuMTEsMTAxMi4yIDE4MC44MSwxMDMwLjk0ICIgZmlsbD0ibm9uZSIgaWQ9Imk1LXRvLWk2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4MS4wMSwxMDM2LjExLDE4NC42NzMyLDEwMjYuOTY3NywxODAuODI0NCwxMDMxLjExMzQsMTc2LjY3ODcsMTAyNy4yNjQ3LDE4MS4wMSwxMDM2LjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48L2c+PCEtLU1ENT1bZDMyY2RiYzUzM2VjMDIwZmM2ZWJhYzlkNGEwMjAyNzFdCnJldmVyc2UgbGluayBiZWFuU3VjY2VzcyB0byBpNi0tPjxnIGlkPSJsaW5rX2JlYW5TdWNjZXNzX2k2Ij48cGF0aCBkPSJNMzQxLjYyLDEwNjMuNSBDMzIxLjM4LDEwNjMuNSAzMDEuMTUsMTA2My41IDI4MC45MSwxMDYzLjUgIiBmaWxsPSJub25lIiBpZD0iYmVhblN1Y2Nlc3MtYmFja3RvLWk2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM0Ni43NywxMDYzLjUsMzM3Ljc3LDEwNTkuNSwzNDEuNzcsMTA2My41LDMzNy43NywxMDY3LjUsMzQ2Ljc3LDEwNjMuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9WzliMmZlNjY2Mjk1NTgzNzg4ZGZlNDQwYzY1ODBhZjk0XQpyZXZlcnNlIGxpbmsgZDEgdG8gYmVhblN1Y2Nlc3MtLT48ZyBpZD0ibGlua19kMV9iZWFuU3VjY2VzcyI+PHBhdGggZD0iTTQ0OC44NCw5NzguNDIgQzQ0Mi41Miw5OTguMjIgNDMzLjQzLDEwMjYuNjkgNDI3LjYyLDEwNDQuODkgIiBmaWxsPSJub25lIiBpZD0iZDEtYmFja3RvLWJlYW5TdWNjZXNzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ1MC4zOSw5NzMuNTksNDQzLjg0ODYsOTgwLjk1MjcsNDQ4Ljg3MzQsOTc4LjM1NDQsNDUxLjQ3MTcsOTgzLjM3OTMsNDUwLjM5LDk3My41OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9W2JhYTkzZWYzZmFiYTQ2MGUxMTU3NDYxMDZmNjNjNTAzXQpyZXZlcnNlIGxpbmsgZDIgdG8gZDEtLT48ZyBpZD0ibGlua19kMl9kMSI+PHBhdGggZD0iTTQ1Niw4NzIuNDIgQzQ1Niw4OTEuNiA0NTYsOTE4LjU5IDQ1Niw5MzYuMTkgIiBmaWxsPSJub25lIiBpZD0iZDItYmFja3RvLWQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ1Niw4NjcuMjMsNDUyLDg3Ni4yMyw0NTYsODcyLjIzLDQ2MCw4NzYuMjMsNDU2LDg2Ny4yMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9WzEwYmNmZjQ0ZGU1NmU2MzIxY2M5MjQxZTZmZjVjNDMzXQpsaW5rIENvbmZpZyB0byBiZC0tPjxnIGlkPSJsaW5rX0NvbmZpZ19iZCI+PHBhdGggZD0iTTg1LDExMC4xMDY3IEM4NSwxMTAuMzYwNCA4NSwxMTAuNjE0OSA4NSwxMTAuODcwMSBDODUsMTExLjg5MTEgODUsMTEyLjkyNDMgODUsMTEzLjk2OSBDODUsMTIyLjMyNzEgODUsMTMxLjQyMzQgODUsMTQwLjg4ODggQzg1LDE3OC43NSA4NSwyMjIuNTE1IDg1LDI0OC41NSAiIGZpbGw9Im5vbmUiIGlkPSJDb25maWctdG8tYmQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iODUsMjUzLjY2LDg5LDI0NC42Niw4NSwyNDguNjYsODEsMjQ0LjY2LDg1LDI1My42NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIiIHg9Ijg2IiB5PSIxNDgiPuino+aekOmFjee9rjwvdGV4dD48L2c+PCEtLU1ENT1bZGYwMTEwNjY0YmNiODAxNDJhYzE1ZTZiODkwYmEwODddCnJldmVyc2UgbGluayBiIHRvIGJkLS0+PGcgaWQ9ImxpbmtfYl9iZCI+PHBhdGggZD0iTTMyOS43Njk3LDI3Mi41IEMzMjkuNTIyMSwyNzIuNSAzMjkuMjY5NCwyNzIuNSAzMjkuMDExNiwyNzIuNSBDMzI0Ljg4NzYsMjcyLjUgMzE5LjQ3MjcsMjcyLjUgMzEzLjAzOCwyNzIuNSBDMzAwLjE2ODQsMjcyLjUgMjgzLjIxOTQsMjcyLjUgMjY0LjM1ODgsMjcyLjUgQzIyNi42Mzc1LDI3Mi41IDE4MS4yNywyNzIuNSAxNDUuNiwyNzIuNSAiIGZpbGw9Im5vbmUiIGlkPSJiLWJhY2t0by1iZCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzMjkuNzY5NywyNzIuNSwzMjAuNzY5NywyNjguNSwzMjQuNzY5NywyNzIuNSwzMjAuNzY5NywyNzYuNSwzMjkuNzY5NywyNzIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIiIHg9IjIxNS41NyIgeT0iMjUwLjUiPuaJp+ihjOWQhOenjTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYiIHg9IjE2My41NyIgeT0iMjY2LjEiPkJlYW5GYWN0b3J5UG9zdFByb2Nlc3NvcjwvdGV4dD48L2c+PCEtLU1ENT1bZDMwMGQzNzNjMzIxYTEzYTRkZTJlNDhlNzQyMTRmNTJdCmxpbmsgYiB0byBiZC0tPjxnIGlkPSJsaW5rX2JfYmQiPjxwYXRoIGQ9Ik0zMjkuODU3OCwyNzMuMDAzOSBDMzI5Ljc5NDUsMjczLjAwNzYgMzI5LjczMDksMjczLjAxMTQgMzI5LjY2NywyNzMuMDE1MiBDMzI1LjU3NjYsMjczLjI1NjYgMzIwLjIyMDYsMjczLjU2MDYgMzE0LjE1MTMsMjczLjg3NjMgQzMwMi4wMTI1LDI3NC41MDc1IDI4Ny4wMiwyNzUuMTg1IDI3My41OSwyNzUuNSBDMjMyLjg3LDI3Ni40NSAxODcuMiwyNzUuNzcgMTUxLDI3NC44MiAiIGZpbGw9Im5vbmUiIGlkPSJiLXRvLWJkIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0NS43MywyNzQuNjcsMTU0LjYxMjEsMjc4LjkyNTQsMTUwLjcyOCwyNzQuODEyOCwxNTQuODQwNiwyNzAuOTI4NywxNDUuNzMsMjc0LjY3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48L2c+PCEtLU1ENT1bNGFkYzY2NDI4MjM2ZDdkNzA3Njg4MDkxNDMzMGJjMDddCmxpbmsgYmQgdG8gaW5zdC0tPjxnIGlkPSJsaW5rX2JkX2luc3QiPjxwYXRoIGQ9Ik05MC4zLDI5MS40OSBDOTYuMDQsMzEwLjk2IDEwNS4xOSwzNDIuMDIgMTExLjM5LDM2My4wNiAiIGZpbGw9Im5vbmUiIGlkPSJiZC10by1pbnN0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjExMi44MiwzNjcuOTIsMTE0LjExMzIsMzU4LjE1NjQsMTExLjQwNjksMzYzLjEyMzksMTA2LjQzOTQsMzYwLjQxNzUsMTEyLjgyLDM2Ny45MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjEwNCIgeT0iMzM1Ij7lj43lsIQ8L3RleHQ+PC9nPjwhLS1NRDU9W2JmZGY3Y2VlZTJhOGVmMjY0NTg4ZDY4ZTllNTIwOWJlXQpsaW5rIGluc3QgdG8gaTEtLT48ZyBpZD0ibGlua19pbnN0X2kxIj48cGF0aCBkPSJNMTIxLjE0LDQwNS4wMiBDMTI0LjgxLDQyNS40NCAxMzAuODgsNDU5LjI0IDEzNC45MSw0ODEuNyAiIGZpbGw9Im5vbmUiIGlkPSJpbnN0LXRvLWkxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjEzNS44Myw0ODYuODYsMTM4LjE3MDIsNDc3LjI5MzIsMTM0Ljk0MzEsNDgxLjkzOTMsMTMwLjI5NzEsNDc4LjcxMjIsMTM1LjgzLDQ4Ni44NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PC9nPjwhLS1NRDU9W2E5NDUxYTFkOWMyNmFlNmM3OGJkYWYyOGY5NDU4ZGQ3XQpAc3RhcnR1bWwNCidsZWZ0IHRvIHJpZ2h0IGRpcmVjdGlvbg0KJ3RvcCB0byBib3R0b20gZGlyZWN0aW9uDQpza2lucGFyYW0gY29tcG9uZW50U3R5bGUgcmVjdGFuZ2xlDQonIHNjYWxlIDUvNg0KDQpwYWNrYWdlICJEZWZpbmUgQ29uZmlnIiBhcyBDb25maWcgew0KICAgIGNvbXBvbmVudCAieG1sIiBhcyB4bWwgDQogICAgY29tcG9uZW50ICJhbm5vdGF0aW9uIiBhcyBhbm5vdGF0aW9uDQp9DQoNCnBhY2thZ2UgIklPQyBDb250YWluZXIiIGFzIElPQyB7DQogICAgDQogICAgY29tcG9uZW50ICJCZWFuRGVmaW5pdGF0aW9uIiBhcyBiZCB7DQogICAgICAgIA0KICAgIH0NCiAgICBjb21wb25lbnQgImJlYW5GYWN0b3J5UG9zdFByb2Nlc3NvciIgIGFzIGIgeyANCiAgICAgICAgDQogICAgICAgIGNhcmQgImJlYW5GYWN0b3J5UG9zdFByb2Nlc3NvciJhcyBiMQ0KICAgICAgICBjYXJkICJiZWFuRmFjdG9yeVBvc3RQcm9jZXNzb3IiYXMgYjINCiAgICAgICAgY2FyZCAiYmVhbkZhY3RvcnlQb3N0UHJvY2Vzc29yImFzIGIzDQogICAgICAgIGIxIC1kb3duLT4gYjINCiAgICAgICAgYjIgLWRvd24tPiBiMw0KICAgIH0NCg0KICAgIGNvbXBvbmVudCAiaW5zdGFudGlhdGlvbu+8iOWunuS+i+WMlu+8iSIgYXMgaW5zdHsNCg0KICAgIH0NCiAgICBjb21wb25lbnQgImluaXRpYWxpemF0aW9u77yI5Yid5aeL5YyW77yJIiBhcyBpbml0ew0KICAgICAgICANCiAgICAgICAgY29tcG9uZW50ICJwb3B1bGF0ZUJlYW4o5aGr5YWF5bGe5oCnKSJhcyBpMQ0KICAgICAgICBjb21wb25lbnQgIuaJp+ihjOWQhOenjUF3YXJl5o6l5Y+j55qEc2V05pa55rOVImFzIGkyDQogICAgICAgIGNvbXBvbmVudCAi5omn6KGMQmVhblBvc3RQcm9jZXNzb3LnmoRcbnBvc3RQcm9jZXNzQmVmb3JlSW5pdGlhbGl6YXRpb27mlrnms5UiYXMgaTMNCiAgICAgICAgY29tcG9uZW50ICLmiafooYxJbml0aWFsaXppbmdCZWFu55qEXG5hZnRlclByb3BlcnRpZXNTZXTmlrnms5UiIGFzIGk0DQogICAgICAgIGNvbXBvbmVudCAi5omn6KGM6Ieq5a6a5LmJIGluaXQgbWV0aG9kIiBhcyBpNQ0KICAgICAgICBjb21wb25lbnQgIuaJp+ihjEJlYW5Qb3N0UHJvY2Vzc29y55qEXG5wb3N0UHJvY2Vzc0FmdGVySW5pdGlhbGl6YXRpb24iIGFzIGk2DQogICAgICAgIGkxIC1kb3duLT4gaTINCiAgICAgICAgaTIgLWRvd24tPiBpMw0KICAgICAgICBpMyAtZG93bi0+IGk0DQogICAgICAgIGk0IC1kb3duLT4gaTUNCiAgICAgICAgaTUgLWRvd24tPiBpNg0KICAgICAgICBpNiAtbGVmdC0+IGJlYW5TdWNjZXNzDQogICANCiAgICB9DQogICAgY29tcG9uZW50ICLlrozmlbTnmoRCZWFu5Yib5bu65oiQ5YqfIiBhcyBiZWFuU3VjY2VzcyB7DQoNCiAgICB9DQogICAgDQogICAgY29tcG9uZW50ICJEZXN0b3J577yI6ZSA5q+B77yJIiBhcyBkZXN0ew0KICAgICAgICBjb21wb25lbnQgIuaJp+ihjERpc3Bvc2FibGVCZWFu55qEZGVzdG9yeeaWueazlSJhcyBkMQ0KICAgICAgICBjb21wb25lbnQgIuaJp+ihjOiHquWumuS5iWRlc3RvcnkgbWV0aG9kImFzIGQyDQogICAgICAgIGJlYW5TdWNjZXNzIC11cC0+IGQxDQogICAgICAgIGQxIC11cC0+IGQyDQogICAgfSAgDQp9DQoNCkNvbmZpZyAtZG93bi0+IGJkOiDop6PmnpDphY3nva4NCmJkIC1sZWZ0LT4gYjog5omn6KGM5ZCE56eNXG5CZWFuRmFjdG9yeVBvc3RQcm9jZXNzb3INCmIgLXJpZ2h0LT4gYmQNCmJkIC1kb3duLT4gaW5zdDog5Y+N5bCEDQppbnN0IC1kb3duLT4gaTENCkBlbmR1bWwNCgpAc3RhcnR1bWwNCnNraW5wYXJhbSBjb21wb25lbnRTdHlsZSByZWN0YW5nbGUNCg0KcGFja2FnZSAiRGVmaW5lIENvbmZpZyIgYXMgQ29uZmlnIHsNCiAgICBjb21wb25lbnQgInhtbCIgYXMgeG1sIA0KICAgIGNvbXBvbmVudCAiYW5ub3RhdGlvbiIgYXMgYW5ub3RhdGlvbg0KfQ0KDQpwYWNrYWdlICJJT0MgQ29udGFpbmVyIiBhcyBJT0Mgew0KICAgIA0KICAgIGNvbXBvbmVudCAiQmVhbkRlZmluaXRhdGlvbiIgYXMgYmQgew0KICAgICAgICANCiAgICB9DQogICAgY29tcG9uZW50ICJiZWFuRmFjdG9yeVBvc3RQcm9jZXNzb3IiICBhcyBiIHsgDQogICAgICAgIA0KICAgICAgICBjYXJkICJiZWFuRmFjdG9yeVBvc3RQcm9jZXNzb3IiYXMgYjENCiAgICAgICAgY2FyZCAiYmVhbkZhY3RvcnlQb3N0UHJvY2Vzc29yImFzIGIyDQogICAgICAgIGNhcmQgImJlYW5GYWN0b3J5UG9zdFByb2Nlc3NvciJhcyBiMw0KICAgICAgICBiMSAtZG93bi0+IGIyDQogICAgICAgIGIyIC1kb3duLT4gYjMNCiAgICB9DQoNCiAgICBjb21wb25lbnQgImluc3RhbnRpYXRpb27vvIjlrp7kvovljJbvvIkiIGFzIGluc3R7DQoNCiAgICB9DQogICAgY29tcG9uZW50ICJpbml0aWFsaXphdGlvbu+8iOWIneWni+WMlu+8iSIgYXMgaW5pdHsNCiAgICAgICAgDQogICAgICAgIGNvbXBvbmVudCAicG9wdWxhdGVCZWFuKOWhq+WFheWxnuaApykiYXMgaTENCiAgICAgICAgY29tcG9uZW50ICLmiafooYzlkITnp41Bd2FyZeaOpeWPo+eahHNldOaWueazlSJhcyBpMg0KICAgICAgICBjb21wb25lbnQgIuaJp+ihjEJlYW5Qb3N0UHJvY2Vzc29y55qEXG5wb3N0UHJvY2Vzc0JlZm9yZUluaXRpYWxpemF0aW9u5pa55rOVImFzIGkzDQogICAgICAgIGNvbXBvbmVudCAi5omn6KGMSW5pdGlhbGl6aW5nQmVhbueahFxuYWZ0ZXJQcm9wZXJ0aWVzU2V05pa55rOVIiBhcyBpNA0KICAgICAgICBjb21wb25lbnQgIuaJp+ihjOiHquWumuS5iSBpbml0IG1ldGhvZCIgYXMgaTUNCiAgICAgICAgY29tcG9uZW50ICLmiafooYxCZWFuUG9zdFByb2Nlc3NvcueahFxucG9zdFByb2Nlc3NBZnRlckluaXRpYWxpemF0aW9uIiBhcyBpNg0KICAgICAgICBpMSAtZG93bi0+IGkyDQogICAgICAgIGkyIC1kb3duLT4gaTMNCiAgICAgICAgaTMgLWRvd24tPiBpNA0KICAgICAgICBpNCAtZG93bi0+IGk1DQogICAgICAgIGk1IC1kb3duLT4gaTYNCiAgICAgICAgaTYgLWxlZnQtPiBiZWFuU3VjY2Vzcw0KICAgDQogICAgfQ0KICAgIGNvbXBvbmVudCAi5a6M5pW055qEQmVhbuWIm+W7uuaIkOWKnyIgYXMgYmVhblN1Y2Nlc3Mgew0KDQogICAgfQ0KICAgIA0KICAgIGNvbXBvbmVudCAiRGVzdG9yee+8iOmUgOavge+8iSIgYXMgZGVzdHsNCiAgICAgICAgY29tcG9uZW50ICLmiafooYxEaXNwb3NhYmxlQmVhbueahGRlc3Rvcnnmlrnms5UiYXMgZDENCiAgICAgICAgY29tcG9uZW50ICLmiafooYzoh6rlrprkuYlkZXN0b3J5IG1ldGhvZCJhcyBkMg0KICAgICAgICBiZWFuU3VjY2VzcyAtdXAtPiBkMQ0KICAgICAgICBkMSAtdXAtPiBkMg0KICAgIH0gIA0KfQ0KDQpDb25maWcgLWRvd24tPiBiZDog6Kej5p6Q6YWN572uDQpiZCAtbGVmdC0+IGI6IOaJp+ihjOWQhOenjVxuQmVhbkZhY3RvcnlQb3N0UHJvY2Vzc29yDQpiIC1yaWdodC0+IGJkDQpiZCAtZG93bi0+IGluc3Q6IOWPjeWwhA0KaW5zdCAtZG93bi0+IGkxDQpAZW5kdW1sDQoKUGxhbnRVTUwgdmVyc2lvbiAxLjIwMjIuMyhUdWUgTWFyIDI5IDE2OjEwOjU3IEdNVCAyMDIyKQooR1BMIHNvdXJjZSBkaXN0cmlidXRpb24pCkphdmEgUnVudGltZTogT3BlbkpESyBSdW50aW1lIEVudmlyb25tZW50CkpWTTogT3BlbkpESyA2NC1CaXQgU2VydmVyIFZNCkRlZmF1bHQgRW5jb2Rpbmc6IFVURi04Ckxhbmd1YWdlOiBlbgpDb3VudHJ5OiBVUwotLT48L2c+PC9zdmc+'>

<h2 id="ClassPathXmlApplicationContext"><a href="#ClassPathXmlApplicationContext" class="headerlink" title="ClassPathXmlApplicationContext"></a>ClassPathXmlApplicationContext</h2><p>我们定义好一个<code>cofig.xml</code> 的配置，然后 <code>ClassPathXmlApplicationContext</code> 这个类就可以帮忙我们管理好我们定义好的 Bean，具体它是如何工作的呢，通过源码来分析。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassPathXmlApplicationTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ClassPathXmlApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;config.xml&quot;</span>);</span><br><span class="line">        Person bean = applicationContext.getBean(Person.class);</span><br><span class="line">        System.out.println(bean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下图展示了 ClassPathXmlApplicationContext 继承关系。</p>
<center><img src="http://img.cuzz.site/20220326191903.png" width="100%" /></center>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassPathXmlApplicationContext</span> <span class="keyword">extends</span> <span class="title">AbstractXmlApplicationContext</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClassPathXmlApplicationContext</span><span class="params">(String configLocation)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="keyword">new</span> String[] &#123;configLocation&#125;, <span class="keyword">true</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClassPathXmlApplicationContext</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        String[] configLocations, <span class="keyword">boolean</span> refresh, <span class="meta">@Nullable</span> ApplicationContext parent)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="comment">// 调用父类构造器，最终会调用AbstractApplicationContext构造器</span></span><br><span class="line">        <span class="keyword">super</span>(parent);</span><br><span class="line">        <span class="comment">// 设置文件路径</span></span><br><span class="line">        setConfigLocations(configLocations);</span><br><span class="line">        <span class="comment">// 默认刷新容器</span></span><br><span class="line">        <span class="keyword">if</span> (refresh) &#123;</span><br><span class="line">            refresh();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="AbstractApplicationContext（调用父类构造器）"><a href="#AbstractApplicationContext（调用父类构造器）" class="headerlink" title="AbstractApplicationContext（调用父类构造器）"></a>AbstractApplicationContext（调用父类构造器）</h3><p>调用父类构造器，最终会调用<code>AbstractApplicationContext</code>构造器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractApplicationContext</span> <span class="keyword">extends</span> <span class="title">DefaultResourceLoader</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">ConfigurableApplicationContext</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 一直调用到这里</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractApplicationContext</span><span class="params">(ApplicationContext parent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">        setParent(parent);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.resourcePatternResolver = getResourcePatternResolver();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取路径解析器</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> ResourcePatternResolver <span class="title">getResourcePatternResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PathMatchingResourcePatternResolver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以最终会创建一个 <code>PathMatchingResourcePatternResolver</code> ，是一个<strong>Ant通配符</strong>模式的 Resource 查找器，可以用来查找类路径或者文件系统的资源。</p>
<ul>
<li>加载单个资源<ul>
<li><code>classpath:config.xml</code></li>
<li><code>http://www.baidu.com</code></li>
</ul>
</li>
<li>加载多个资源<ul>
<li><code>classpath:META-INF/*.xml</code></li>
<li><code>file:/Users/config/*.xml</code></li>
</ul>
</li>
</ul>
<h3 id="setConfigLocations（设置文件路径）"><a href="#setConfigLocations（设置文件路径）" class="headerlink" title="setConfigLocations（设置文件路径）"></a>setConfigLocations（设置文件路径）</h3><p>看 <code>AbstractRefreshableConfigApplicationContext#setConfigLocations</code> 方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractRefreshableConfigApplicationContext</span> <span class="keyword">extends</span> <span class="title">AbstractRefreshableApplicationContext</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">BeanNameAware</span>, <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 设置配置文件,设置应用程序上下文</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigLocations</span><span class="params">(<span class="meta">@Nullable</span> String... locations)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (locations != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Assert.noNullElements(locations, <span class="string">&quot;Config locations must not be null&quot;</span>);</span><br><span class="line">            <span class="keyword">this</span>.configLocations = <span class="keyword">new</span> String[locations.length];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; locations.length; i++) &#123;</span><br><span class="line">                <span class="comment">// 设置具体的路径</span></span><br><span class="line">                <span class="keyword">this</span>.configLocations[i] = resolvePath(locations[i]).trim();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.configLocations = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 解析路径</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">resolvePath</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getEnvironment().resolveRequiredPlaceholders(path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>resolvePath</code> 主要用于解析占位符号的，替换路径中的占位符 <code>$&#123;placeholder&#125;</code> 为系统变量中的值。</p>
<h3 id="Environment（环境变量）"><a href="#Environment（环境变量）" class="headerlink" title="Environment（环境变量）"></a>Environment（环境变量）</h3><p>解析路径占位符的时候会先获取环境变量 <code>getEnvironment</code>，具体代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractRefreshableConfigApplicationContext</span> <span class="keyword">extends</span> <span class="title">AbstractRefreshableApplicationContext</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">BeanNameAware</span>, <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取环境变量</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConfigurableEnvironment <span class="title">getEnvironment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断环境变量是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.environment == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 创建一个环境变量</span></span><br><span class="line">            <span class="keyword">this</span>.environment = createEnvironment();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.environment;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建一个标准的环境变量</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> ConfigurableEnvironment <span class="title">createEnvironment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StandardEnvironment();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>StandardEnvironment具体继承关系：</p>
<center><img src="http://img.cuzz.site/20220327110825.png" width="50%" /></center>

<p>Enviroment主要代表了当前应用所处的环境，主要和 Profile 和 Property 相关。</p>
<h3 id="refresh（默认刷新容器）"><a href="#refresh（默认刷新容器）" class="headerlink" title="refresh（默认刷新容器）"></a>refresh（默认刷新容器）</h3><p>最终会调用到 <code>AbstractApplicationContext#refresh</code> 这个方法，这个方法比较重要，主要用于 bean 的解析。</p>
<h2 id="AbstractApplicationContext-refresh"><a href="#AbstractApplicationContext-refresh" class="headerlink" title="AbstractApplicationContext#refresh"></a>AbstractApplicationContext#refresh</h2><p>最终会调用到 <code>AbstractApplicationContext#refresh</code> 这个方法，这个方法比较重要，主要用于 bean 的解析。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractApplicationContext</span> <span class="keyword">extends</span> <span class="title">DefaultResourceLoader</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">ConfigurableApplicationContext</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">            <span class="comment">// Prepare this context for refreshing.</span></span><br><span class="line">            prepareRefresh();</span><br><span class="line">            <span class="comment">// Tell the subclass to refresh the internal bean factory.</span></span><br><span class="line">            ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line">            <span class="comment">// Prepare the bean factory for use in this context.</span></span><br><span class="line">            prepareBeanFactory(beanFactory);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// Allows post-processing of the bean factory in context subclasses.</span></span><br><span class="line">                postProcessBeanFactory(beanFactory);</span><br><span class="line">                <span class="comment">// Invoke factory processors registered as beans in the context.</span></span><br><span class="line">                invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line">                <span class="comment">// Register bean processors that intercept bean creation.</span></span><br><span class="line">                registerBeanPostProcessors(beanFactory);</span><br><span class="line">                <span class="comment">// Initialize message source for this context.</span></span><br><span class="line">                initMessageSource();</span><br><span class="line">                <span class="comment">// Initialize event multicaster for this context.</span></span><br><span class="line">                initApplicationEventMulticaster();</span><br><span class="line">                <span class="comment">// Initialize other special beans in specific context subclasses.</span></span><br><span class="line">                onRefresh();</span><br><span class="line">                <span class="comment">// Check for listener beans and register them.</span></span><br><span class="line">                registerListeners();</span><br><span class="line">                <span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">                finishBeanFactoryInitialization(beanFactory);</span><br><span class="line">                <span class="comment">// Last step: publish corresponding event.</span></span><br><span class="line">                finishRefresh();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="prepareRefresh"><a href="#prepareRefresh" class="headerlink" title="prepareRefresh"></a>prepareRefresh</h3><p>激活开启容器，表示在真正做refresh操作之前需要准备做的事情：</p>
<ul>
<li>设置Spring容器的启动时间，撤销关闭状态，开启活跃状态。</li>
<li>初始化属性源信息(Property)</li>
<li>验证环境信息里一些必须存在的属性</li>
<li>初始化一些事件集合</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">prepareRefresh</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Switch to active.</span></span><br><span class="line">    <span class="comment">// 当前激活时间</span></span><br><span class="line">    <span class="keyword">this</span>.startupDate = System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// 设定当前容器未关闭</span></span><br><span class="line">    <span class="keyword">this</span>.closed.set(<span class="keyword">false</span>);</span><br><span class="line">    <span class="comment">// 设置当前容器处于激活状态</span></span><br><span class="line">    <span class="keyword">this</span>.active.set(<span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">// 初始化一下属性(该方法默认是空的,是提供给子类来实现的,有些bean初始化需要一些依赖加载配置</span></span><br><span class="line">    <span class="comment">// Initialize any placeholder property sources in the context environment.</span></span><br><span class="line">    initPropertySources();</span><br><span class="line">    <span class="comment">// 校验熟悉是否合法</span></span><br><span class="line">    <span class="comment">// Validate that all properties marked as required are resolvable:</span></span><br><span class="line">    <span class="comment">// see ConfigurablePropertyResolver#setRequiredProperties</span></span><br><span class="line">    getEnvironment().validateRequiredProperties();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Allow for the collection of early ApplicationEvents,</span></span><br><span class="line">    <span class="comment">// to be published once the multicaster is available...</span></span><br><span class="line">    <span class="keyword">this</span>.earlyApplicationEvents = <span class="keyword">new</span> LinkedHashSet&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="obtainFreshBeanFactory"><a href="#obtainFreshBeanFactory" class="headerlink" title="obtainFreshBeanFactory"></a>obtainFreshBeanFactory</h3><p>获取beanFactory，调用 <code>AbstractRefreshableApplicationContext#refreshBeanFactory</code> 方法,该方法实现对该上下文的底层bean工厂执行实际的刷新，关闭之前的bean工厂(如果有的话)，并为上下文生命周期的下一阶段初始化一个新bean工厂。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">refreshBeanFactory</span><span class="params">()</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">    <span class="comment">// 若已经存在beanFactory了，那就做一些清理工作（销毁单例Bean、关闭工厂）</span></span><br><span class="line">    <span class="keyword">if</span> (hasBeanFactory()) &#123;</span><br><span class="line">        destroyBeans();</span><br><span class="line">        closeBeanFactory();</span><br><span class="line">    &#125;</span><br><span class="line">    DefaultListableBeanFactory beanFactory = createBeanFactory();</span><br><span class="line">    beanFactory.setSerializationId(getId());</span><br><span class="line">    customizeBeanFactory(beanFactory);</span><br><span class="line">    <span class="comment">// 加载Bean定义。抽象方法，由子类去决定从哪儿去把Bean定义加载进来</span></span><br><span class="line">    loadBeanDefinitions(beanFactory);</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>.beanFactoryMonitor) &#123;</span><br><span class="line">        <span class="keyword">this</span>.beanFactory = beanFactory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="prepareBeanFactory"><a href="#prepareBeanFactory" class="headerlink" title="prepareBeanFactory"></a>prepareBeanFactory</h3><p>对beanFactory做预处理设置，对刚创建的BeanFactory进行相关的设置为后续的使用做准备</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">prepareBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Tell the internal bean factory to use the context&#x27;s class loader etc.</span></span><br><span class="line">    beanFactory.setBeanClassLoader(getClassLoader());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置 beanFactory 的表达式语言处理器，Spring3 增加了表达式语言的支持，如：@Value(&quot;#&#123;19 - 1&#125;&quot;)</span></span><br><span class="line">    beanFactory.setBeanExpressionResolver(<span class="keyword">new</span> StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为 beanFactory 增加一个默认的 propertyEditor，这个主要是对 bean 的属性等设置管理的一个工具，</span></span><br><span class="line">    beanFactory.addPropertyEditorRegistrar(<span class="keyword">new</span> ResourceEditorRegistrar(<span class="keyword">this</span>, getEnvironment()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加 BeanPostProcessor，可以处理 XxAware 接口的 bean，让继承ApplicationContextAware的Bean能感知Bean</span></span><br><span class="line">    beanFactory.addBeanPostProcessor(<span class="keyword">new</span> ApplicationContextAwareProcessor(<span class="keyword">this</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置这几个忽略自动装配的接口,这基本不用能 @Autowire 注入</span></span><br><span class="line">    beanFactory.ignoreDependencyInterface(EnvironmentAware.class);</span><br><span class="line">    beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);</span><br><span class="line">    beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);</span><br><span class="line">    beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);</span><br><span class="line">    beanFactory.ignoreDependencyInterface(MessageSourceAware.class);</span><br><span class="line">    beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置这个几个可以自动装配</span></span><br><span class="line">    beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);</span><br><span class="line">    beanFactory.registerResolvableDependency(ResourceLoader.class, <span class="keyword">this</span>);</span><br><span class="line">    beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, <span class="keyword">this</span>);</span><br><span class="line">    beanFactory.registerResolvableDependency(ApplicationContext.class, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Register early post-processor for detecting inner beans as ApplicationListeners.</span></span><br><span class="line">    beanFactory.addBeanPostProcessor(<span class="keyword">new</span> ApplicationListenerDetector(<span class="keyword">this</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加编译时支持AspectJ</span></span><br><span class="line">    <span class="keyword">if</span> (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;</span><br><span class="line">        beanFactory.addBeanPostProcessor(<span class="keyword">new</span> LoadTimeWeaverAwareProcessor(beanFactory));</span><br><span class="line">        <span class="comment">// Set a temporary ClassLoader for type matching.</span></span><br><span class="line">        beanFactory.setTempClassLoader(<span class="keyword">new</span> ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注入系统相关Bean</span></span><br><span class="line">    <span class="keyword">if</span> (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) &#123;</span><br><span class="line">        beanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) &#123;</span><br><span class="line">        beanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) &#123;</span><br><span class="line">        beanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="postProcessBeanFactory"><a href="#postProcessBeanFactory" class="headerlink" title="postProcessBeanFactory"></a>postProcessBeanFactory</h3><p>beanFactory准备工作完成后进行的后置处理工作，在标准初始化后，修改内部beanFactory，所有bean定义都加载加载完成，但是bean还没有被实例化。</p>
<p>这允许在特定的 <code>ApplicationContext</code>实现中注册特殊的 <code>BeanPostProcessors</code>等，其实这个时候拿到 beanFactory，可以对beanFactory做任何你想处理的东西。</p>
<p>一般web容器都会对应的实现此方法，比如 <code>AbstractRefreshableWebApplicationContext</code>，设置后置处理器或者一些环境变量相关的东西。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">    beanFactory.addBeanPostProcessor(<span class="keyword">new</span> ServletContextAwareProcessor(<span class="keyword">this</span>.servletContext, <span class="keyword">this</span>.servletConfig));</span><br><span class="line">    beanFactory.ignoreDependencyInterface(ServletContextAware.class);</span><br><span class="line">    beanFactory.ignoreDependencyInterface(ServletConfigAware.class);</span><br><span class="line"></span><br><span class="line">    WebApplicationContextUtils.registerWebApplicationScopes(beanFactory, <span class="keyword">this</span>.servletContext);</span><br><span class="line">    WebApplicationContextUtils.registerEnvironmentBeans(beanFactory, <span class="keyword">this</span>.servletContext, <span class="keyword">this</span>.servletConfig);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="invokeBeanFactoryPostProcessors"><a href="#invokeBeanFactoryPostProcessors" class="headerlink" title="invokeBeanFactoryPostProcessors"></a>invokeBeanFactoryPostProcessors</h3><p>执行beanFactory后置处理器的方法，在Spring容器中找出实现了<code>BeanFactoryPostProcessor</code>接口的processor并执行。最终会调用 <code>PostProcessorRegistrationDelegate#invokeBeanFactoryPostProcessors</code>方法执行。</p>
<p>主要有看这两个接口：</p>
<ul>
<li><code>BeanFactoryPostProcessor</code>：用来修改Spring容器中已经存在的bean的定义，使用<code>ConfigurableListableBeanFactory</code>对bean进行处理</li>
<li><code>BeanDefinitionRegistryPostProcessor</code>：继承<code>BeanFactoryPostProcessor</code>，作用跟<code>BeanFactoryPostProcessor</code>一样，只不过是使用<code>BeanDefinitionRegistry</code>对bean进行处理，带有注册功能，Spring注解驱动的 <code>ConfigurationClassPostProcessor</code> 就是实现这个处理器。</li>
</ul>
<h3 id="registerBeanPostProcessors"><a href="#registerBeanPostProcessors" class="headerlink" title="registerBeanPostProcessors"></a>registerBeanPostProcessors</h3><p>注册bean的后置处理器，此部分实质上是在<code>BeanDefinitions</code>中寻找<code>BeanPostProcessor</code>，之后调用<code>BeanFactory#addBeanPostProcessor</code>方法保存在一个List中，注意添加时仍然有优先级的概念，优先级高的在前面。</p>
<h3 id="initMessageSource"><a href="#initMessageSource" class="headerlink" title="initMessageSource"></a>initMessageSource</h3><p>初始化 MessageSource 组件，在Spring容器中初始化一些国际化相关的属性。</p>
<h3 id="initApplicationEventMulticaster"><a href="#initApplicationEventMulticaster" class="headerlink" title="initApplicationEventMulticaster"></a>initApplicationEventMulticaster</h3><p>初始化广播事件</p>
<h3 id="onRefresh"><a href="#onRefresh" class="headerlink" title="onRefresh"></a>onRefresh</h3><p>用来初始化子容器中的bean，默认是空方法。</p>
<p>一个模板方法，不同的Spring容器做不同的事情，允许子类在进行bean初始化之前进行一些定制操作。</p>
<p>比如，<code>AbstractRefreshableWebApplicationContext#onRefresh</code>方法会初始化主题。</p>
<h3 id="registerListeners"><a href="#registerListeners" class="headerlink" title="registerListeners"></a>registerListeners</h3><p>注册监听器</p>
<h3 id="finishBeanFactoryInitialization"><a href="#finishBeanFactoryInitialization" class="headerlink" title="finishBeanFactoryInitialization"></a>finishBeanFactoryInitialization</h3><p>初始化所有剩下的单实例 bean</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finishBeanFactoryInitialization</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Initialize conversion service for this context.</span></span><br><span class="line">    <span class="comment">// 为容器初始化ConversionService，这个主要是做类型转化</span></span><br><span class="line">    <span class="keyword">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;</span><br><span class="line">            beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) &#123;</span><br><span class="line">        beanFactory.setConversionService(</span><br><span class="line">                beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Register a default embedded value resolver if no bean post-processor</span></span><br><span class="line">    <span class="comment">// (such as a PropertyPlaceholderConfigurer bean) registered any before:</span></span><br><span class="line">    <span class="comment">// at this point, primarily for resolution in annotation attribute values.</span></span><br><span class="line">    <span class="comment">// 若没有设置值解析器，那就注册一个默认的值解析器</span></span><br><span class="line">    <span class="keyword">if</span> (!beanFactory.hasEmbeddedValueResolver()) &#123;</span><br><span class="line">        beanFactory.addEmbeddedValueResolver(strVal -&gt; getEnvironment().resolvePlaceholders(strVal));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.</span></span><br><span class="line">    String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class="keyword">false</span>, <span class="keyword">false</span>);</span><br><span class="line">    <span class="keyword">for</span> (String weaverAwareName : weaverAwareNames) &#123;</span><br><span class="line">        getBean(weaverAwareName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Stop using the temporary ClassLoader for type matching.</span></span><br><span class="line">    <span class="comment">// 清空临时类加载器</span></span><br><span class="line">    beanFactory.setTempClassLoader(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Allow for caching all bean definition metadata, not expecting further changes.</span></span><br><span class="line">    <span class="comment">// 缓存（快照）下当前所有的Bean定义信息 beanFactory</span></span><br><span class="line">    beanFactory.freezeConfiguration();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">    <span class="comment">// 实例化所有单例对象</span></span><br><span class="line">    beanFactory.preInstantiateSingletons();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="finishRefresh"><a href="#finishRefresh" class="headerlink" title="finishRefresh"></a>finishRefresh</h3><p>完成bean的创建初始化工作,完成 IoC 容器的创建</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finishRefresh</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Clear context-level resource caches (such as ASM metadata from scanning).</span></span><br><span class="line">    <span class="comment">// 表示清除一些resourceCaches，清除context级别的资源缓存，比如ASM的元数据</span></span><br><span class="line">    clearResourceCaches();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize lifecycle processor for this context.</span></span><br><span class="line">    <span class="comment">// 初始化所有的LifecycleProcessor，与生命周期相关</span></span><br><span class="line">    initLifecycleProcessor();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Propagate refresh to lifecycle processor first.</span></span><br><span class="line">    getLifecycleProcessor().onRefresh();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Publish the final event.</span></span><br><span class="line">    <span class="comment">// 发布容器刷新的事件：</span></span><br><span class="line">    publishEvent(<span class="keyword">new</span> ContextRefreshedEvent(<span class="keyword">this</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Participate in LiveBeansView MBean, if active.</span></span><br><span class="line">    LiveBeansView.registerApplicationContext(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_29799655/article/details/105398225">Spring refresh方法详解</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/seaswalker/spring-analysis/blob/master/note/Spring.md">spring-analysis</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/binarylei/p/10198698.html">Spring系列</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/f641385712/article/details/88118288">Spring IOC容器启动流程</a></li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Spring/">Spring</a><a class="link-muted mr-2" rel="tag" href="/tags/%E6%BA%90%E7%A0%81/">源码</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/img/alipay.png" alt="Alipay"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/wechatpay.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/03/21/hexo-plantuml-template/"><span class="level-item">Hexo如何使用PlantUML画图</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "127a8472871754f5420dbd519b51d8dc",
            repo: "cuzz1.github.io",
            owner: "cuzz1",
            clientID: "e829281603f9115c572d",
            clientSecret: "246dae10dfb1b363805ab98902dc93539c355bb3",
            admin: ["cuzz1"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#前言"><span class="mr-2">1</span><span>前言</span></a></li><li><a class="is-flex" href="#ClassPathXmlApplicationContext"><span class="mr-2">2</span><span>ClassPathXmlApplicationContext</span></a><ul class="menu-list"><li><a class="is-flex" href="#AbstractApplicationContext（调用父类构造器）"><span class="mr-2">2.1</span><span>AbstractApplicationContext（调用父类构造器）</span></a></li><li><a class="is-flex" href="#setConfigLocations（设置文件路径）"><span class="mr-2">2.2</span><span>setConfigLocations（设置文件路径）</span></a></li><li><a class="is-flex" href="#Environment（环境变量）"><span class="mr-2">2.3</span><span>Environment（环境变量）</span></a></li><li><a class="is-flex" href="#refresh（默认刷新容器）"><span class="mr-2">2.4</span><span>refresh（默认刷新容器）</span></a></li></ul></li><li><a class="is-flex" href="#AbstractApplicationContext-refresh"><span class="mr-2">3</span><span>AbstractApplicationContext#refresh</span></a><ul class="menu-list"><li><a class="is-flex" href="#prepareRefresh"><span class="mr-2">3.1</span><span>prepareRefresh</span></a></li><li><a class="is-flex" href="#obtainFreshBeanFactory"><span class="mr-2">3.2</span><span>obtainFreshBeanFactory</span></a></li><li><a class="is-flex" href="#prepareBeanFactory"><span class="mr-2">3.3</span><span>prepareBeanFactory</span></a></li><li><a class="is-flex" href="#postProcessBeanFactory"><span class="mr-2">3.4</span><span>postProcessBeanFactory</span></a></li><li><a class="is-flex" href="#invokeBeanFactoryPostProcessors"><span class="mr-2">3.5</span><span>invokeBeanFactoryPostProcessors</span></a></li><li><a class="is-flex" href="#registerBeanPostProcessors"><span class="mr-2">3.6</span><span>registerBeanPostProcessors</span></a></li><li><a class="is-flex" href="#initMessageSource"><span class="mr-2">3.7</span><span>initMessageSource</span></a></li><li><a class="is-flex" href="#initApplicationEventMulticaster"><span class="mr-2">3.8</span><span>initApplicationEventMulticaster</span></a></li><li><a class="is-flex" href="#onRefresh"><span class="mr-2">3.9</span><span>onRefresh</span></a></li><li><a class="is-flex" href="#registerListeners"><span class="mr-2">3.10</span><span>registerListeners</span></a></li><li><a class="is-flex" href="#finishBeanFactoryInitialization"><span class="mr-2">3.11</span><span>finishBeanFactoryInitialization</span></a></li><li><a class="is-flex" href="#finishRefresh"><span class="mr-2">3.12</span><span>finishRefresh</span></a></li></ul></li><li><a class="is-flex" href="#总结"><span class="mr-2">4</span><span>总结</span></a></li><li><a class="is-flex" href="#参考"><span class="mr-2">5</span><span>参考</span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a><p class="size-small"><span>&copy; 2022 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: false,
                    fold: ''
                }
            }
        };</script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>