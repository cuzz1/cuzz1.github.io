<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Shell入门 - cuzz&#039;s blog</title><meta description="博客记录"><meta property="og:type" content="blog"><meta property="og:title" content="Shell入门"><meta property="og:url" content="https://blog.cuzz.site/2018/10/04/Shell%E5%85%A5%E9%97%A8/"><meta property="og:site_name" content="cuzz&#039;s blog"><meta property="og:description" content="博客记录"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://picsum.photos/501/324"><meta property="article:published_time" content="2018-10-04T11:54:59.000Z"><meta property="article:author" content="cuzz"><meta property="article:tag" content="shell"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://picsum.photos/501/324"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.cuzz.site/2018/10/04/Shell%E5%85%A5%E9%97%A8/"},"headline":"cuzz's blog","image":[],"datePublished":"2018-10-04T11:54:59.000Z","author":{"@type":"Person","name":"John Doe"},"description":"Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。 Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。 Ken Thompson 的 sh 是第一种 Unix Shell，Windows Explorer 是一个典型的图形界面 Shell"}</script><link rel="canonical" href="https://blog.cuzz.site/2018/10/04/Shell%E5%85%A5%E9%97%A8/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.13.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.0.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/likes">Likes</a><a class="navbar-item" href="/images">Images</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cuzz1"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://picsum.photos/501/324" alt="Shell入门"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-10-04T11:54:59.000Z" title="2018-10-04T11:54:59.000Z">2018-10-04</time></span><span class="level-item"><a class="link-muted" href="/categories/linux/">linux</a></span><span class="level-item">10 minutes read (About 1542 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Shell入门</h1><div class="content"><p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。Shell 既是一种命令语言，又是一种程序设计语言。</p>
<p>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。</p>
<p>Ken Thompson 的 sh 是第一种 Unix Shell，Windows Explorer 是一个典型的图形界面 Shell</p>
<a id="more"></a>

<h1 id="Shell编程之Hello-World"><a href="#Shell编程之Hello-World" class="headerlink" title="Shell编程之Hello World"></a>Shell编程之Hello World</h1><p>编写一个hello world</p>
<p>shell一般使用<code>.sh</code>作为后缀</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash         <span class="comment"># 使用/bin/sh来解释执行</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> auto <span class="built_in">echo</span> hello world!   <span class="comment"># 解释这个脚本是干什么的</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by authors cuzz          <span class="comment"># 作者和时间一些信息</span></span></span><br><span class="line"></span><br><span class="line">echo &quot;hello world!&quot;              </span><br></pre></td></tr></table></figure>

<p>给脚本添加执行权限</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; chmod +x hello.sh</span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之变量"><a href="#Shell编程之变量" class="headerlink" title="Shell编程之变量"></a>Shell编程之变量</h1><p>Shell变量可以分为两类：局部变量和环境变量</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> define path variables</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by authors cuzz</span></span><br><span class="line"></span><br><span class="line">name=cuzz    # 等号两边不能有空格</span><br><span class="line"></span><br><span class="line">echo &quot;my name is $name&quot;  # 使用$引用</span><br></pre></td></tr></table></figure>

<p>基本变量</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo $PWD  # 当前路径</span><br><span class="line">echo $0    # 脚本名</span><br><span class="line">echo $1    # 第一个参数</span><br><span class="line">echo $2    # 第二个参数</span><br><span class="line">echo $?    # 判断上一个命令是否正确</span><br><span class="line">echo $*    # 所有参数</span><br><span class="line">echo $#    # 参数的个数</span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之if条件语句"><a href="#Shell编程之if条件语句" class="headerlink" title="Shell编程之if条件语句"></a>Shell编程之if条件语句</h1><p>比较大小</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> <span class="built_in">test</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by authors cuzz</span></span><br><span class="line"></span><br><span class="line">num=100</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 计算使用两个小括号</span></span><br><span class="line">if (($num &gt; 10)); then</span><br><span class="line">    echo &quot;this num greater than 10.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;this num littler than 10.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>逻辑运算符</p>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th>说明</th>
<th align="left">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-eq</td>
<td>检测两个数是否相等，相等返回   true。</td>
<td align="left">[   $a -eq $b ] 返回 false。</td>
</tr>
<tr>
<td align="center">-ne</td>
<td>检测两个数是否不相等，不相等返回 true。</td>
<td align="left">[ $a -ne $b ] 返回 true。</td>
</tr>
<tr>
<td align="center">-gt</td>
<td>检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td align="left">[ $a -gt $b ] 返回 false。</td>
</tr>
<tr>
<td align="center">-lt</td>
<td>检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td align="left">[ $a -lt $b ] 返回 true。</td>
</tr>
<tr>
<td align="center">-ge</td>
<td>检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td align="left">[ $a -ge $b ] 返回 false。</td>
</tr>
<tr>
<td align="center">-le</td>
<td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td align="left">[ $a -le $b ] 返回 true。</td>
</tr>
</tbody></table>
<p>目录</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>-d file</td>
<td>检测文件是否是目录，如果是，则返回 true。</td>
<td>[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td>-f file</td>
<td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td>[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td>-p file</td>
<td>检测文件是否是有名管道，如果是，则返回 true。</td>
<td>[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td>-e file</td>
<td>检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td>[ -e $file ] 返回 true。</td>
</tr>
</tbody></table>
<p>创建文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> <span class="built_in">test</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by authors cuzz</span></span><br><span class="line"></span><br><span class="line">DIR=cuzz</span><br><span class="line"></span><br><span class="line">if [ ! -d $DIR ]; then  # 都有空格</span><br><span class="line">    mkdir $DIR</span><br><span class="line">    echo &quot;this $DIR create success.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;this dir is exit.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>测试文件是否存在</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> <span class="built_in">test</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by authors cuzz</span></span><br><span class="line"></span><br><span class="line">file=test.txt</span><br><span class="line"></span><br><span class="line">if [ ! -e $file ]; then  </span><br><span class="line">    echo &quot;OK&quot; &gt;&gt; $file  # &gt;&gt;是追加内容 &gt;是覆盖内容</span><br><span class="line">else</span><br><span class="line">    cat $file</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>mysql备份</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> auto backup mysql db</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by authors cuzz</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> define backup path</span></span><br><span class="line">BAK_DIR=/data/backup/`date +%Y%m%d` # 反引号可以把里面当作命令来解析 </span><br><span class="line"><span class="meta">#</span><span class="bash"> mysql</span></span><br><span class="line">MYSQLDB=test</span><br><span class="line">MYSQLUSER=root</span><br><span class="line">MYSQLPW=123456</span><br><span class="line">MYSQLCMD=/usr/bin/mysqldump # 备份命令</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断是否是root</span></span><br><span class="line">if [ $UID -ne 0 ]; then</span><br><span class="line">    echo &quot;Only root can execute Shell.&quot;</span><br><span class="line">    exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if [ ! -d $BAK_DIR ]; then</span><br><span class="line">    mkdir -p $BAK_DIR      # -p 父目录不存在就创建</span><br><span class="line">    echo &quot;The $BAK_DIR create success.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;This $BAK_DIR is exist.&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> mysql backup <span class="built_in">command</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">MYSQLCMD -u<span class="variable">$MYSQLUSER</span> -p<span class="variable">$MYSQLPW</span> -d <span class="variable">$MYSQLDB</span> &gt;<span class="variable">$BAK_DIR</span>/<span class="variable">$MYSQLDB</span>.sql</span></span><br><span class="line"></span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">    echo &quot;backup success.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;backup fail.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之for循环"><a href="#Shell编程之for循环" class="headerlink" title="Shell编程之for循环"></a>Shell编程之for循环</h1><p>基本语句</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in `seq 1 15`</span><br><span class="line">do</span><br><span class="line">    echo &quot;the number is $i.&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>求和</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">sum=0</span><br><span class="line"></span><br><span class="line">for ((i=1; i&lt;=100; i++)) # 双括号用于运算相当与其他语言的单括号</span><br><span class="line">do</span><br><span class="line">    sum=`expr $sum + $i` # expr用于计算</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;$sum&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打包，只能打包到最后一个，后面的会把前面的覆盖了</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for file in `find ./ -name &quot;*.sh&quot;`</span><br><span class="line"></span><br><span class="line">do</span><br><span class="line">    tar -czf all.tgz $file</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之while循环"><a href="#Shell编程之while循环" class="headerlink" title="Shell编程之while循环"></a>Shell编程之while循环</h1><p>使用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">i=0</span><br><span class="line">while [[ $i -lt 10 ]]  # (( $i &lt; 10))是一样的</span><br><span class="line">do</span><br><span class="line">    echo &quot;$i&quot;</span><br><span class="line">    ((i++))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>结合read使用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">while read line   # 把读取的东西赋值给line</span><br><span class="line">do</span><br><span class="line">    echo $line</span><br><span class="line">done &lt;/etc/hosts  # 从哪里读取</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之数组"><a href="#Shell编程之数组" class="headerlink" title="Shell编程之数组"></a>Shell编程之数组</h1><p>Shell 数组用括号来表示，元素用”空格”符号分割开，语法格式如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">my_array=(A B &quot;C&quot; D) # 定义数组</span><br><span class="line"></span><br><span class="line">array_name[0]=value0 # 使用下标来定义</span><br><span class="line">array_name[1]=value1</span><br><span class="line">array_name[2]=value2</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;array_name[0]&#125;    <span class="comment"># 读取第一个元素</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;my_array[*]&#125;      <span class="comment"># 读取所有元素       </span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;my_array[@]&#125;      <span class="comment"># 读取所有元素</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;<span class="comment">#my_array[*]&#125;     # 读取数组长度</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;<span class="comment">#my_array[@]&#125;     # 读取数组长度</span></span></span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之函数"><a href="#Shell编程之函数" class="headerlink" title="Shell编程之函数"></a>Shell编程之函数</h1><p>无返回值得函数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sayHello()&#123;                  # 定义函数一</span><br><span class="line">    echo &quot;hello&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function sayHelloWorld()&#123;    # 定义函数二</span><br><span class="line">    echo &quot;hello world&quot;</span><br><span class="line">&#125;</span><br><span class="line">sayhell  # 使用函数</span><br></pre></td></tr></table></figure>

<p>有返回值得，使用return只能返回0-255</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">function sum()</span><br><span class="line">&#123;</span><br><span class="line">  returnValue=$(( $1 + $2 ))</span><br><span class="line">  return $returnValue</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum 22 4</span><br><span class="line"></span><br><span class="line">echo $?</span><br></pre></td></tr></table></figure>

<p>可以使用echo来传递参数 </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">function length()</span><br><span class="line">&#123;</span><br><span class="line">  str=$1</span><br><span class="line">  result=0</span><br><span class="line">  if [ &quot;$str&quot; != &quot;&quot; ] ; then</span><br><span class="line">      result=$&#123;#str&#125;</span><br><span class="line">  fi</span><br><span class="line">  echo &quot;$result&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">len=$(length &quot;abc123&quot;)  # 调用</span><br><span class="line"></span><br><span class="line">echo &quot;The string&#x27;s length is $len &quot;</span><br></pre></td></tr></table></figure>



<h1 id="Shell编程之sed命令"><a href="#Shell编程之sed命令" class="headerlink" title="Shell编程之sed命令"></a>Shell编程之sed命令</h1><p>把test.txt中的old修改为new，要使用-i才能插入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; sed -i &#39;s&#x2F;old&#x2F;new&#x2F;s&#39; test.txt</span><br></pre></td></tr></table></figure>

<p>在每行行前面添加一个cuzz</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; sed -i  sed &#39;s&#x2F;^&#x2F;&amp;cuzz&#x2F;g&#39; test.txt</span><br></pre></td></tr></table></figure>

<p>在每行的末尾添加一个cuzz</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; sed  -i &#39;s&#x2F;$&#x2F;&amp; cuzz&#x2F;g&#39; test.txt</span><br></pre></td></tr></table></figure>

<p>匹配某一行，在下方插入一行，找到cuzz这行在下方插入####</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; sed &#39;&#x2F;cuzz&#x2F;a #######&#39; test.txt</span><br></pre></td></tr></table></figure>

<p>在之前添加一行，只要把a改成i</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; sed &#39;&#x2F;cuzz&#x2F;i #######&#39; test.txt</span><br></pre></td></tr></table></figure>

<p>打印</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; sed -n &#39;&#x2F;cuzz&#x2F;p&#39; test.txt  # 打印含有cuzz这一行</span><br><span class="line">&gt; sed -n &#39;1p&#39; test.txt       # 打印第一行</span><br><span class="line">&gt; sed -n &#39;1,5p&#39; text.txt     # 打印1到5行</span><br></pre></td></tr></table></figure>

<p>查找最大和最小值 number.txt</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">12 324 56 0034 -23 345</span><br><span class="line">345 349- 245 345 </span><br><span class="line"></span><br><span class="line">345 0989 0459 -25</span><br></pre></td></tr></table></figure>

<p>命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat number.txt | sed &#x27;s/ /\n/g&#x27; | grep -v &quot;^$&quot; | sort -nr | sed -n &#x27;1p;$p&#x27;</span><br><span class="line"></span><br><span class="line">sed &#x27;s/ /\n/g&#x27;  # 把所有空格换成换行</span><br><span class="line">grep -v &quot;^$&quot;    # 去掉所有空格</span><br><span class="line">sort -nr        # 降序排列</span><br><span class="line">sed -n &#x27;1p;$p   # 找出第1行和最后一行</span><br></pre></td></tr></table></figure>



<h1 id="Shell编程之grep命令"><a href="#Shell编程之grep命令" class="headerlink" title="Shell编程之grep命令"></a>Shell编程之grep命令</h1><blockquote>
<p>-a ：将 binary 文件以 text 文件的方式搜寻数据</p>
<p>-c ：计算找到 ‘搜寻字符串’ 的次数</p>
<p>-i ：忽略大小写的不同，所以大小写视为相同</p>
<p>-n ：顺便输出行号</p>
<p>-v ：反向选择，亦即显示出没有 ‘搜寻字符串’ 内容的那一行</p>
<p>–color=auto ：可以将找到的关键词部分加上颜色的显示</p>
</blockquote>
<p>egrep 和grep -E 相同，可以使用正则表达式</p>
<h1 id="Shell编程之awk命令"><a href="#Shell编程之awk命令" class="headerlink" title="Shell编程之awk命令"></a>Shell编程之awk命令</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 每行按空格或TAB分割</span></span><br><span class="line">cat test.txt | awk &#x27;&#123;print $1&#125;&#x27;      # 行匹配语句 awk &#x27;&#x27; 只能用单引号</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定分割</span></span><br><span class="line">awk -F                               #-F相当于内置变量FS, 指定分割字符</span><br><span class="line">cat test.txt | awk -F: &#x27;&#123;print $1&#125;&#x27;  # 以分号分割</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定添加某些内容</span></span><br><span class="line">cat test.txt | awk -F: &#x27;&#123;print &quot;haha&quot; $1&#125;&#x27; # 提前出来再添加haha</span><br></pre></td></tr></table></figure>

<h1 id="Shell编程之find命令"><a href="#Shell编程之find命令" class="headerlink" title="Shell编程之find命令"></a>Shell编程之find命令</h1><p>基本命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find /dir -name &quot;test.txt&quot;          # 在/dir目录下查找</span><br><span class="line">find . -name &quot;test.txt&quot;             # 在当前目录下找 </span><br><span class="line">find . -maxdepth 1 -name &quot;text.txt&quot; # 只遍历一层</span><br><span class="line">find . -type f -name &quot;text&quot;         # 指定类型</span><br><span class="line">find . -name &quot;text&quot; -mtime -1       # 指定时间</span><br><span class="line">find . -size +20M                   # 指定大小</span><br></pre></td></tr></table></figure>

<p>查找并执行其他命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find . -name &quot;text.txt&quot; -exec rm -rf &#123;&#125; \;  # 后面&#123;&#125; \是固定格式</span><br></pre></td></tr></table></figure>

</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/shell/">shell</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/img/alipay.png" alt="Alipay"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/wechatpay.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/11/23/%E5%A0%86%E6%8E%92%E5%BA%8F/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">堆排序</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/09/25/Spring%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89/"><span class="level-item">Spring注解驱动开发（三）</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "2c829d60e5a0f797819ba27fb8c91e3b",
            repo: "cuzz1.github.io",
            owner: "cuzz1",
            clientID: "e829281603f9115c572d",
            clientSecret: "246dae10dfb1b363805ab98902dc93539c355bb3",
            admin: ["cuzz1"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#Shell编程之Hello-World"><span class="mr-2">1</span><span>Shell编程之Hello World</span></a></li><li><a class="is-flex" href="#Shell编程之变量"><span class="mr-2">2</span><span>Shell编程之变量</span></a></li><li><a class="is-flex" href="#Shell编程之if条件语句"><span class="mr-2">3</span><span>Shell编程之if条件语句</span></a></li><li><a class="is-flex" href="#Shell编程之for循环"><span class="mr-2">4</span><span>Shell编程之for循环</span></a></li><li><a class="is-flex" href="#Shell编程之while循环"><span class="mr-2">5</span><span>Shell编程之while循环</span></a></li><li><a class="is-flex" href="#Shell编程之数组"><span class="mr-2">6</span><span>Shell编程之数组</span></a></li><li><a class="is-flex" href="#Shell编程之函数"><span class="mr-2">7</span><span>Shell编程之函数</span></a></li><li><a class="is-flex" href="#Shell编程之sed命令"><span class="mr-2">8</span><span>Shell编程之sed命令</span></a></li><li><a class="is-flex" href="#Shell编程之grep命令"><span class="mr-2">9</span><span>Shell编程之grep命令</span></a></li><li><a class="is-flex" href="#Shell编程之awk命令"><span class="mr-2">10</span><span>Shell编程之awk命令</span></a></li><li><a class="is-flex" href="#Shell编程之find命令"><span class="mr-2">11</span><span>Shell编程之find命令</span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a><p class="size-small"><span>&copy; 2022 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: false,
                    fold: ''
                }
            }
        };</script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>