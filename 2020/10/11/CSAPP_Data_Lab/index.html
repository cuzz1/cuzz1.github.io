<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Data Lab - cuzz&#039;s blog</title><meta description="博客记录"><meta property="og:type" content="blog"><meta property="og:title" content="Data Lab"><meta property="og:url" content="http://blog.cuzz.site/2020/10/11/CSAPP_Data_Lab/"><meta property="og:site_name" content="cuzz&#039;s blog"><meta property="og:description" content="博客记录"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://picsum.photos/548/301"><meta property="article:published_time" content="2020-10-11T15:59:59.000Z"><meta property="article:author" content="cuzz"><meta property="article:tag" content="二进制"><meta property="article:tag" content="计算机基础"><meta property="article:tag" content="位运算"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://picsum.photos/548/301"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.cuzz.site/2020/10/11/CSAPP_Data_Lab/"},"headline":"cuzz's blog","image":[],"datePublished":"2020-10-11T15:59:59.000Z","author":{"@type":"Person","name":"John Doe"},"description":"前言CSAPP 这本书买了好几年，最近抽出一些时间开始重头读这本书，发现这些基础知识比较重要，边看书边跟着视频课程过了一遍，有些东西还是比较模糊。本文开始做 CSAPP Lab 实验，加强巩固书的内容。"}</script><link rel="canonical" href="http://blog.cuzz.site/2020/10/11/CSAPP_Data_Lab/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.13.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.0.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/likes">Likes</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cuzz1"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://picsum.photos/548/301" alt="Data Lab"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-11T15:59:59.000Z" title="2020-10-11T15:59:59.000Z">2020-10-11</time></span><span class="level-item"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></span><span class="level-item">13 minutes read (About 1902 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Data Lab</h1><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CSAPP 这本书买了好几年，最近抽出一些时间开始重头读这本书，发现这些基础知识比较重要，边看书边跟着视频课程过了一遍，有些东西还是比较模糊。本文开始做 <a target="_blank" rel="noopener" href="http://csapp.cs.cmu.edu/3e/labs.html">CSAPP Lab</a> 实验，加强巩固书的内容。</p>
<a id="more"></a>

<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>这个实验主要考察整数和单精度浮点数的表示以及位运算，加强深对对计算机数据表示的理解。</p>
<p>任务指引还是比较清晰的，主要有以下一些说明：</p>
<ol>
<li>整型的范围是 0 到 255(0xFF)，不允许用更大</li>
<li>只能包含参数和局部变量</li>
<li>一元操作符 <code>!</code> <code>~</code></li>
<li>二元操作符 <code>&amp;</code> <code>|</code> <code>+</code> <code>&lt;&lt;</code> <code>&gt;&gt;</code></li>
<li>浮点数可以使用控制语句</li>
</ol>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="bitXor"><a href="#bitXor" class="headerlink" title="bitXor"></a>bitXor</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * bitXor - x^y using only ~ and &amp;</span></span><br><span class="line"><span class="comment"> *   Example: bitXor(4, 5) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp;</span></span><br><span class="line"><span class="comment"> *   Max ops: 14</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitXor</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ~(~(~x &amp; y) &amp; ~(x &amp; ~y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异或就是二级制不相等才为1，同时为 0 或者同时为 1，结果为 0 ，比如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">十进制   二进制</span><br><span class="line">  4      100</span><br><span class="line">  5      101 </span><br><span class="line">         001 &#x2F;&#x2F; 异或结果</span><br></pre></td></tr></table></figure>

<p>其中<code>(~x &amp; y)</code> 表示 x 中的 0 和 y 中的 1，<code>(x &amp; ~y)</code>表示 x 中的 1和 y 中的 0，然后通过德·摩根定律<code>~(a &amp; b) = ~a | ~b</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">x ^ y &#x3D; (~x &amp; y) | (x &amp; ~y) &#x3D; ~(~(~x &amp; y) &amp; ~(x &amp; ~y))</span><br></pre></td></tr></table></figure>

<h3 id="tmin"><a href="#tmin" class="headerlink" title="tmin"></a>tmin</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * tmin - return minimum two&#x27;s complement integer</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 4</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">tmin</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个题目比较简单，int 有符号采用的是补码表示如图，最小为<code>10000000 00000000 00000000 00000000</code> 我们只需要把 1 往左移动 31 位就行。</p>
<center><img src="http://img.cuzz.site/20201011183216.jpeg" width="80%"></center>

<p>   </p>
<h3 id="isTmax"><a href="#isTmax" class="headerlink" title="isTmax"></a>isTmax</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isTmax - returns 1 if x is the maximum, two&#x27;s complement number,</span></span><br><span class="line"><span class="comment"> *     and 0 otherwise</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | +</span></span><br><span class="line"><span class="comment"> *   Max ops: 10</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isTmax</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !(x + <span class="number">1</span> + x + <span class="number">1</span>) &amp; !!(~x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们发现最大值两倍加二为0，但是要排除 -1（补码全为1）后面<code>!!(~x)</code> 就是这个逻辑。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">x                01111111 11111111 11111111 11111111</span><br><span class="line">x + 1            10000000 00000000 00000000 00000000</span><br><span class="line">x + 1 + x        11111111 11111111 11111111 11111111</span><br><span class="line">x + 1 + x + 1    00000000 00000000 00000000 00000000</span><br></pre></td></tr></table></figure>

<h3 id="allOddBits"><a href="#allOddBits" class="headerlink" title="allOddBits"></a>allOddBits</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * allOddBits - return 1 if all odd-numbered bits in word set to 1</span></span><br><span class="line"><span class="comment"> *   where bits are numbered from 0 (least significant) to 31 (most significant)</span></span><br><span class="line"><span class="comment"> *   Examples allOddBits(0xFFFFFFFD) = 0, allOddBits(0xAAAAAAAA) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">allOddBits</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> e = <span class="number">0xAA</span> | (<span class="number">0xAA</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">    e = e | (e &lt;&lt; <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">return</span> !((e &amp; x) ^ e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先获取全为奇数位的数，这里的奇数指的是位的阶级是 2 的几次幂。然后取并如果偶数为有值，那么异或之后就不会为0。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 10101010 10101010 10101010 10101010</span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">0xAA</span>;        <span class="comment">// 00000000 00000000 00000000 10101010</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">0xAA</span> &lt;&lt; <span class="number">8</span>;   <span class="comment">// 00000000 00000000 10101010 00000000</span></span><br><span class="line"><span class="keyword">int</span> c = a | b;       <span class="comment">// 00000000 00000000 10101010 10101010</span></span><br><span class="line"><span class="keyword">int</span> d = c &lt;&lt; <span class="number">16</span>;     <span class="comment">// 10101010 10101010 00000000 00000000</span></span><br><span class="line"><span class="keyword">int</span> e = c | d;       <span class="comment">// 10101010 10101010 10101010 10101010</span></span><br></pre></td></tr></table></figure>

<h3 id="negate"><a href="#negate" class="headerlink" title="negate"></a>negate</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * negate - return -x</span></span><br><span class="line"><span class="comment"> *   Example: negate(1) = -1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 5</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">negate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ~x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以发现取反之后两个之和为 -1，<code>x + ~x = -1</code>，那么<code>-x = ~x + 1</code>然后只需要取反加 1就行，</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> -8      -7   -6   -5   -4   -3   -2   -1   0    1    2    3    4    5    6    7</span><br><span class="line">1000 1001 1010 1011 1100 1101 1110 1111 0000 0001 0010 0011 0100 0101 0110 0111  </span><br><span class="line">0111 1001 0101 0100 0011 0010 0001 0000 1111 1110 1101 1100 1011 1010 1001 1000</span><br><span class="line">  7    6    5    4    3   2    1     0    -1   -2   -3   -4  -5   -6   -7   -8</span><br></pre></td></tr></table></figure>

<h3 id="isAsciiDigit"><a href="#isAsciiDigit" class="headerlink" title="isAsciiDigit"></a>isAsciiDigit</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isAsciiDigit - return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters &#x27;0&#x27; to &#x27;9&#x27;)</span></span><br><span class="line"><span class="comment"> *   Example: isAsciiDigit(0x35) = 1.</span></span><br><span class="line"><span class="comment"> *            isAsciiDigit(0x3a) = 0.</span></span><br><span class="line"><span class="comment"> *            isAsciiDigit(0x05) = 0.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 15</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isAsciiDigit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> min = <span class="number">0x1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">       <span class="keyword">int</span> max = ~min;</span><br><span class="line">       <span class="keyword">int</span> start = ~<span class="number">0x39</span>;</span><br><span class="line">       <span class="keyword">int</span> end = max - <span class="number">0x30</span> + <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">int</span> c = (x + start) &gt;&gt; <span class="number">31</span>;</span><br><span class="line">       <span class="keyword">int</span> d = (x + end) &gt;&gt; <span class="number">31</span>;</span><br><span class="line">       <span class="comment">// printf(&quot;x=%d, c=%d, d=%d\n&quot;,x, c, d);</span></span><br><span class="line">       <span class="keyword">return</span> !!(c &amp; d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>比如保证<code> a + start &lt; 0</code> 并且<code> b + start &lt; 0</code>，然后 <code>a + end &lt; 0</code> 并且 <code>b + end &lt; 0</code>，这个时候是溢出小于零。根据如果 x 为负数<code>x &gt;&gt; 31 = -1</code>，否者 <code>x &gt;&gt; 31 = 0</code>，再通过两次去反获得。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> -8      -7   -6   -5   -4   -3   -2   -1   0    1    2    3    4    5    6    7</span><br><span class="line">1000 1001 1010 1011 1100 1101 1110 1111 0000 0001 0010 0011 0100 0101 0110 0111  </span><br><span class="line"> </span><br><span class="line">a &lt;&#x3D; x &lt;&#x3D; b   1 &lt;&#x3D; x &lt;&#x3D; 3    2&lt;&#x3D; x &lt;&#x3D; 5 </span><br><span class="line"></span><br><span class="line">start  end      -4       7     -6       6</span><br><span class="line">   </span><br><span class="line">-y &#x3D; ~y + 1</span><br><span class="line"></span><br><span class="line">start + b &#x3D; -1     &#x3D;&gt; start &#x3D; -1 - b &#x3D; ~b</span><br><span class="line">a + end &#x3D; max + 1  &#x3D;&gt; end &#x3D; max + 1 - a &#x3D; max - a + 1</span><br></pre></td></tr></table></figure>

<h3 id="conditional"><a href="#conditional" class="headerlink" title="conditional"></a>conditional</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * conditional - same as x ? y : z</span></span><br><span class="line"><span class="comment"> *   Example: conditional(2,4,5) = 4</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 16</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">conditional</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mask = ~!x + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (y &amp; ~mask) | (z &amp; mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是一个if-else 语句，我们可以转化为 <code>(y op expr) | (z op expr)</code>，其中 <code>op</code> 为操作符，<code>expr</code> 为表达式。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(y op expr) | (z op expr)</span><br><span class="line"></span><br><span class="line">x &#x3D;&#x3D; 0  mask &#x3D; 0xFFFFFFF</span><br><span class="line">x !&#x3D; 0  mask &#x3D; 0xOOOOOOO</span><br></pre></td></tr></table></figure>

<h3 id="isLessOrEqual"><a href="#isLessOrEqual" class="headerlink" title="isLessOrEqual"></a>isLessOrEqual</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isLessOrEqual - if x &lt;= y  then return 1, else return 0</span></span><br><span class="line"><span class="comment"> *   Example: isLessOrEqual(4,5) = 1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 24</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLessOrEqual</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x_sign = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>; <span class="comment">// x 的符号</span></span><br><span class="line">    <span class="keyword">int</span> y_sign = (y &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>; <span class="comment">// y 的符号</span></span><br><span class="line">    <span class="keyword">int</span> a = !(x ^ y);</span><br><span class="line">    <span class="keyword">int</span> b = (x_sign &amp; (!y_sign)); <span class="comment">// 判断是否 x &lt; 0 y &gt; 0</span></span><br><span class="line">    <span class="keyword">int</span> c = (!((x_sign ^ y_sign) &amp; <span class="number">0x01</span>)); <span class="comment">// 判断符号是否相等</span></span><br><span class="line">    <span class="comment">// x - y = x + ~y + 1</span></span><br><span class="line">    <span class="keyword">int</span> res_sign = ((x + ~y + <span class="number">1</span>) &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>;<span class="comment">// 判断x-y的符号</span></span><br><span class="line">    <span class="keyword">return</span> a | b | (c &amp; res_sign);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用 <code>x - y</code> 通过符号来判断，但是可能会溢出，所以当符号不相同就可以直接判断大小。</p>
<table>
<thead>
<tr>
<th align="center">x</th>
<th align="center">y</th>
<th align="center">x - y</th>
</tr>
</thead>
<tbody><tr>
<td align="center">x &gt; 0</td>
<td align="center">y &gt; 0</td>
<td align="center">正常</td>
</tr>
<tr>
<td align="center">x &gt; 0</td>
<td align="center">y &lt; 0</td>
<td align="center">可能向上溢出</td>
</tr>
<tr>
<td align="center">x &lt; 0</td>
<td align="center">y &gt; 0</td>
<td align="center">可能向下溢出</td>
</tr>
<tr>
<td align="center">x &lt; 0</td>
<td align="center">y &lt; 0</td>
<td align="center">正常</td>
</tr>
</tbody></table>
<p>主要分为3部，</p>
<ul>
<li>看看是否两个数相等 <code>!(x ^ y)</code> 如果相等为1</li>
<li>判断符号是否相反，主要看 x &lt; 0，y  &gt; 0</li>
<li>判断符号相等的时候，x - y &lt; 0</li>
</ul>
<h3 id="logicalNeg"><a href="#logicalNeg" class="headerlink" title="logicalNeg"></a>logicalNeg</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * logicalNeg - implement the ! operator, using all of</span></span><br><span class="line"><span class="comment"> *              the legal operators except !</span></span><br><span class="line"><span class="comment"> *   Examples: logicalNeg(3) = 0, logicalNeg(0) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">logicalNeg</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> neg_x = ~x + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> ((neg_x | x) &gt;&gt; <span class="number">31</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>求  <code>x | -x</code> ，如果 x 不为 0 的化，那么符号位一定为 1，如果 x 为 0 那么符号为0。</p>
<h3 id="howManyBits"><a href="#howManyBits" class="headerlink" title="howManyBits"></a>howManyBits</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* howManyBits - return the minimum number of bits required to represent x in</span></span><br><span class="line"><span class="comment"> *             two&#x27;s complement</span></span><br><span class="line"><span class="comment"> *  Examples: howManyBits(12) = 5               //  0_1100</span></span><br><span class="line"><span class="comment"> *            howManyBits(298) = 10             //  0_100101010</span></span><br><span class="line"><span class="comment"> *            howManyBits(-5) = 4               //  1_101</span></span><br><span class="line"><span class="comment"> *            howManyBits(0)  = 1               //  0</span></span><br><span class="line"><span class="comment"> *            howManyBits(-1) = 1               //  1</span></span><br><span class="line"><span class="comment"> *            howManyBits(1) =  2               //  0_1</span></span><br><span class="line"><span class="comment"> *            howManyBits(0x80000000) = 32</span></span><br><span class="line"><span class="comment"> *  Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *  Max ops: 90</span></span><br><span class="line"><span class="comment"> *  Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">howManyBits</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> b16, b8, b4, b2, b1, b0;</span><br><span class="line">    <span class="keyword">int</span> mask = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="comment">// 如果x为正数，保持不变；如果为负数，按位取反</span></span><br><span class="line">    x = (mask &amp; ~x) | (~mask &amp; x);</span><br><span class="line">    <span class="comment">// 如果高16位有1，b16 = 16，否者为0</span></span><br><span class="line">    b16 = !!(x &gt;&gt; <span class="number">16</span>) &lt;&lt; <span class="number">4</span>;</span><br><span class="line">    <span class="comment">// 如果高16位有1，x右移16位，在新的16为重继续找</span></span><br><span class="line">    x = x &gt;&gt; b16;</span><br><span class="line">    <span class="comment">// 高8</span></span><br><span class="line">    b8 = !!(x &gt;&gt; <span class="number">8</span>) &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    x = x &gt;&gt; b8;</span><br><span class="line">    <span class="comment">// 高4位</span></span><br><span class="line">    b4 = !!(x &gt;&gt; <span class="number">4</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">    x = x &gt;&gt; b4;</span><br><span class="line">    <span class="comment">// 高2位</span></span><br><span class="line">    b2 = !!(x &gt;&gt; <span class="number">2</span>) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    x = x &gt;&gt; b2;</span><br><span class="line">    <span class="comment">// 高1位</span></span><br><span class="line">    b1 = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    x = x &gt;&gt; b1;</span><br><span class="line">    <span class="comment">// 底1位</span></span><br><span class="line">    b0 = x;</span><br><span class="line">    <span class="keyword">return</span> b16 + b8 + b4 + b2 + b1 + b0 + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于正数，找到最左边的 1，对于负数，按位取反处理。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 1 1 1 0 0 0 1     b4 &#x3D; 4</span><br><span class="line">0 1 1 1             b2 &#x3D; 2</span><br><span class="line">0 1                 b1 &#x3D; 0</span><br><span class="line">  1                 b0 &#x3D; 1</span><br></pre></td></tr></table></figure>

<h3 id="floatScale2"><a href="#floatScale2" class="headerlink" title="floatScale2"></a>floatScale2</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * floatScale2 - Return bit-level equivalent of expression 2*f for</span></span><br><span class="line"><span class="comment"> *   floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int&#x27;s, but</span></span><br><span class="line"><span class="comment"> *   they are to be interpreted as the bit-level representation of</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   When argument is NaN, return argument</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatScale2</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// sign  exp  frac</span></span><br><span class="line">    <span class="comment">//  1     8    23</span></span><br><span class="line">    <span class="keyword">unsigned</span> sign = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="built_in">exp</span> = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> frac = uf &amp; <span class="number">0x7FFFFF</span>;</span><br><span class="line">    <span class="comment">// 特殊</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> uf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 非规格化</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        frac = frac &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> (sign &lt;&lt; <span class="number">31</span>) | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 规格化</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">exp</span> ++;</span><br><span class="line">        <span class="keyword">return</span> (sign &lt;&lt; <span class="number">31</span>) | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先分别求出 <code>sign</code> ，<code>exp</code> 和 <code>frac</code>，如果是特殊值直接返回，在判断是否是规格化，分别处理。</p>
<center><img src="http://img.cuzz.site/20201017230919.png" width="80%"></center>

<h3 id="floatFloat2Int"><a href="#floatFloat2Int" class="headerlink" title="floatFloat2Int"></a>floatFloat2Int</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * floatFloat2Int - Return bit-level equivalent of expression (int) f</span></span><br><span class="line"><span class="comment"> *   for floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Argument is passed as unsigned int, but</span></span><br><span class="line"><span class="comment"> *   it is to be interpreted as the bit-level representation of a</span></span><br><span class="line"><span class="comment"> *   single-precision floating point value.</span></span><br><span class="line"><span class="comment"> *   Anything out of range (including NaN and infinity) should return</span></span><br><span class="line"><span class="comment"> *   0x80000000u.</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">floatFloat2Int</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// sign  exp  frac</span></span><br><span class="line">    <span class="comment">//  1     8    23</span></span><br><span class="line">    <span class="keyword">unsigned</span> sign = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="built_in">exp</span> = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> frac_v = uf &amp; <span class="number">0x7FFFFF</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// E = exp - Bias = exp - 127</span></span><br><span class="line">    <span class="keyword">int</span> E = <span class="built_in">exp</span> - <span class="number">127</span>;</span><br><span class="line">    <span class="comment">// 超过范围</span></span><br><span class="line">    <span class="keyword">if</span> (E &gt;= <span class="number">31</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0x80000000</span>u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 小数</span></span><br><span class="line">    <span class="keyword">if</span> (E &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// M = frac + 1;</span></span><br><span class="line">    <span class="keyword">unsigned</span> unsigned_res = (frac_v &gt;&gt; (<span class="number">23</span> - E)) | (<span class="number">1</span> &lt;&lt; E);</span><br><span class="line">    <span class="keyword">if</span> (sign) &#123;</span><br><span class="line">        <span class="keyword">return</span> -unsigned_res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unsigned_res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把浮点数转化为有符号整数，<code>M = 1 + frac</code>，<code>frac</code> 一共 23 位，左移 <code>23 - E</code> 就获得我们想要的书，但是要加上隐藏的 1，最后根据符号位取相反数就行。</p>
<h3 id="floatPower2"><a href="#floatPower2" class="headerlink" title="floatPower2"></a>floatPower2</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * floatPower2 - Return bit-level equivalent of the expression 2.0^x</span></span><br><span class="line"><span class="comment"> *   (2.0 raised to the power x) for any 32-bit integer x.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   The unsigned value that is returned should have the identical bit</span></span><br><span class="line"><span class="comment"> *   representation as the single-precision floating-point number 2.0^x.</span></span><br><span class="line"><span class="comment"> *   If the result is too small to be represented as a denorm, return</span></span><br><span class="line"><span class="comment"> *   0. If too large, return +INF.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. Also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatPower2</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 非规格化最小值</span></span><br><span class="line">    <span class="comment">// 0 00000000 00000000000000000000001</span></span><br><span class="line">    <span class="comment">// E = 1 - Bias = 1 - 127 = 126</span></span><br><span class="line">    <span class="comment">// frac = 1 * 2^-22</span></span><br><span class="line">    <span class="comment">// M = frac</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^-148 </span></span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">-148</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非规格化最大值</span></span><br><span class="line">    <span class="comment">// 0 000000 111111111111111111111111</span></span><br><span class="line">    <span class="comment">// E = 1 - Bias = 1 - 127 = -126</span></span><br><span class="line">    <span class="comment">// frac = 1 (近似,小于)</span></span><br><span class="line">    <span class="comment">// M = frac</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^-126 (近似，小于)</span></span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">-126</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">1</span> &lt;&lt;  (x + <span class="number">148</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 规格化最大值</span></span><br><span class="line">    <span class="comment">// 0 11111110 11111111111111111111111</span></span><br><span class="line">    <span class="comment">// E = exp - Bias = 254 - 127 = 127</span></span><br><span class="line">    <span class="comment">// M = 1 + frac = 1.111111111111111111111111</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^128 (近似,小于)</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">128</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0xFF</span> &lt;&lt; <span class="number">23</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 规格化最小值</span></span><br><span class="line">    <span class="comment">// 0 00000001 00000000000000000000000</span></span><br><span class="line">    <span class="comment">// E = exp - Bias = 1 - 127 = -126</span></span><br><span class="line">    <span class="comment">// M = 1 + frac = 1</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^-126</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">-126</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">exp</span> = x + <span class="number">127</span>;</span><br><span class="line">        <span class="keyword">return</span>  <span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>求 <code>2.0^x</code> 的浮点数表示，只要抓住几个边界条件就行。</p>
<h3 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h3><p>最后我们运行一下测试程序，发现都通过了，开心。</p>
<center><img src="http://img.cuzz.site/20201019235030.png" width="80%"></center>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>主要考察整数和单精度浮点数的表示以及位运算，加强深对对计算机数据表示的理解。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/137284416">CSAPP:Lab1-Data Lab</a></li>
<li><a target="_blank" rel="noopener" href="https://wdxtub.com/csapp/thick-csapp-lab-1/2016/04/16/">【读厚 CSAPP】I Data Lab</a></li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/">二进制</a><a class="link-muted mr-2" rel="tag" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><a class="link-muted mr-2" rel="tag" href="/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/">位运算</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/img/alipay.png" alt="Alipay"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/img/wechatpay.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/10/17/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">浮点数在计算机中的表示</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/09/29/Spring%E7%9A%84%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5/"><span class="level-item">Spring 的复杂类型注入</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "3947b08dbf1828d87eb2165fd632807b",
            repo: "cuzz1.github.io",
            owner: "cuzz1",
            clientID: "e829281603f9115c572d",
            clientSecret: "246dae10dfb1b363805ab98902dc93539c355bb3",
            admin: ["cuzz1"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#前言"><span class="mr-2">1</span><span>前言</span></a></li><li><a class="is-flex" href="#说明"><span class="mr-2">2</span><span>说明</span></a></li><li><a class="is-flex" href="#题目"><span class="mr-2">3</span><span>题目</span></a><ul class="menu-list"><li><a class="is-flex" href="#bitXor"><span class="mr-2">3.1</span><span>bitXor</span></a></li><li><a class="is-flex" href="#tmin"><span class="mr-2">3.2</span><span>tmin</span></a></li><li><a class="is-flex" href="#isTmax"><span class="mr-2">3.3</span><span>isTmax</span></a></li><li><a class="is-flex" href="#allOddBits"><span class="mr-2">3.4</span><span>allOddBits</span></a></li><li><a class="is-flex" href="#negate"><span class="mr-2">3.5</span><span>negate</span></a></li><li><a class="is-flex" href="#isAsciiDigit"><span class="mr-2">3.6</span><span>isAsciiDigit</span></a></li><li><a class="is-flex" href="#conditional"><span class="mr-2">3.7</span><span>conditional</span></a></li><li><a class="is-flex" href="#isLessOrEqual"><span class="mr-2">3.8</span><span>isLessOrEqual</span></a></li><li><a class="is-flex" href="#logicalNeg"><span class="mr-2">3.9</span><span>logicalNeg</span></a></li><li><a class="is-flex" href="#howManyBits"><span class="mr-2">3.10</span><span>howManyBits</span></a></li><li><a class="is-flex" href="#floatScale2"><span class="mr-2">3.11</span><span>floatScale2</span></a></li><li><a class="is-flex" href="#floatFloat2Int"><span class="mr-2">3.12</span><span>floatFloat2Int</span></a></li><li><a class="is-flex" href="#floatPower2"><span class="mr-2">3.13</span><span>floatPower2</span></a></li><li><a class="is-flex" href="#测试一下"><span class="mr-2">3.14</span><span>测试一下</span></a></li></ul></li><li><a class="is-flex" href="#总结"><span class="mr-2">4</span><span>总结</span></a></li><li><a class="is-flex" href="#参考"><span class="mr-2">5</span><span>参考</span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a><p class="size-small"><span>&copy; 2021 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: false,
                    fold: ''
                }
            }
        };</script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>